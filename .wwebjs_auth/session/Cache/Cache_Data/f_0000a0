/*! For license information please see edit-2511dc0671d7325c7cbd.js.LICENSE.txt */

!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="c7a8d14b-2d01-51b1-8171-03a9010b8ee8")}catch(e){}}();
(()=>{"use strict";var t,e={5818:(t,e,n)=>{var r=n(72292),o=n(40173),i=n(6283),s=n.n(i),a=n(75160),c=n.n(a),l=function(){var t=this,e=t._self._c;return e("div",[t.showVerifyEmailBanner?e("message-banner",{attrs:{message:t.translations.settings.banner.verifyEmail},on:{click:t.onVerifyEmailBannerClicked,close:t.onVerifyEmailBannerClosed}}):t._e(),t._v(" "),t.showOutOfBackupCodesBanner?e("message-banner",{attrs:{message:t.outOfBackupCodesWarning},on:{click:t.onOutOfBackupCodesBannerClicked,close:t.onOutOfBackupCodesBannerClosed}}):t._e(),t._v(" "),t.isMobile?e("div",{staticClass:"editProfile"},[e("div",{staticClass:"profileHeader headerBackdropMobile"},[e("div",{staticClass:"userInfo"},[e("avatar",{attrs:{"filesize-limit":t.avatars.filesizeLimitMB}}),t._v(" "),e("h1",[t._v(t._s(t.welcomeText))]),t._v(" "),e("p",[t._v(t._s(t.translations.settings.linksHeader))])],1)])]):t._e(),t._v(" "),e("main",{class:{linksAtBottom:t.isMobile}},[e("div",{staticClass:"editProfile"},[t.showingSudoModal?e("sudo-modal",{attrs:{translations:t.translations.settings.sudoModal,"logout-url":t.logoutUrl},on:{"sudo-granted":t.onGranted,close:t.onClosed}}):t._e(),t._v(" "),t.isMobile?t._e():e("div",{staticClass:"profileHeader"},[e("div",{staticClass:"headerBackdrop"}),t._v(" "),e("div",{staticClass:"userInfo"},[e("avatar",{attrs:{"filesize-limit":t.avatars.filesizeLimitMB}}),t._v(" "),e("h1",[t._v(t._s(t.welcomeText))]),t._v(" "),e("p",[t._v(t._s(t.translations.settings.linksHeader))])],1),t._v(" "),e("links",{attrs:{translations:t.translations.settings.links,urls:{syncUrl:t.syncUrl,forumsUrl:t.forumsUrl}}})],1),t._v(" "),e("user-info-form",{attrs:{translations:t.translations.settings.userInfo,"valid-countries":t.validCountries}}),t._v(" "),e("login-options-form",{attrs:{translations:t.translations.settings.loginOptions}}),t._v(" "),e("social-form",{attrs:{translations:t.translations.settings.social}}),t._v(" "),e("notification-preferences",{attrs:{translations:t.translations.settings.notificationPreferences}}),t._v(" "),e("marketing-consent",{attrs:{"double-opt-in-countries":t.doubleOptInCountries,translations:t.translations.settings.marketingConsent}}),t._v(" "),e("active-sessions-field",{attrs:{translations:t.translations.settings.activeSessions}}),t._v(" "),e("delete-account-field",{attrs:{url:t.deleteUrl,translations:t.translations.settings.deleteAccount}}),t._v(" "),t.isMobile?e("links",{attrs:{translations:t.translations.settings.links,urls:{syncUrl:t.syncUrl,forumsUrl:t.forumsUrl},"links-at-bottom":!0,"show-subscriptions":!t.ofaAPIAvailable}}):t._e()],1)])],1)};l._withStripped=!0;var u=n(95353),d=n(30766),p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"avatar-container"},[e("img",{staticClass:"avatar-rounded",attrs:{src:t.profileImageURL,alt:"Your picture"},on:{click:t.toggleModal}}),t._v(" "),t.hasAvatar?e("img",{staticClass:"avatar-edit-badge",attrs:{src:n(75524),alt:"Change"},on:{click:t.toggleContextMenu}}):e("img",{staticClass:"avatar-camera-badge",attrs:{src:n(27330),alt:"Change"},on:{click:t.toggleModal}}),t._v(" "),t.contextMenuVisible?e("div",{staticClass:"context-menu"},[e("a",{on:{click:function(e){return e.stopPropagation(),t.toggleModal.apply(null,arguments)}}},[t._v(t._s(t.extraTranslations.change))]),t._v(" "),e("a",{on:{click:function(e){return e.stopPropagation(),t.deleteAvatar.apply(null,arguments)}}},[t._v(t._s(t.extraTranslations.delete))])]):t._e(),t._v(" "),t.modalState===t.MODAL_STATES.SELECTING?e("modal",{key:"select-avatar",attrs:{id:"modal-avatar"}},[e("div",{staticClass:"modalHeader",attrs:{slot:"header"},slot:"header"},[e("h3",[t._v(t._s(t.translations.topBarHeader))]),t._v(" "),e("div",{staticClass:"modalClose",on:{click:t.toggleModal}})]),t._v(" "),e("div",{staticClass:"modalMain",attrs:{slot:"main"},on:{drop:function(e){return e.preventDefault(),t.onImgDrop.apply(null,arguments)},dragover:function(t){t.preventDefault()}},slot:"main"},[e("div",{staticClass:"drop-area hidden-for-mobile"},[e("div",{staticClass:"circle-with-camera"},[e("img",{attrs:{src:n(1436),alt:"Change"}})]),t._v(" "),e("h3",[t._v(t._s(t.translations.dragAndDropHere))]),t._v(" "),e("p",{staticClass:"text or lowercase"},[t._v("\n          "+t._s(t.translations.or)+"\n        ")])]),t._v(" "),e("div",{staticClass:"from-computer"},[e("label",{staticClass:"secondaryButton",attrs:{for:"from-computer-input"}},[t._v("\n          "+t._s(t.translations.selectPhoto)+"\n        ")]),t._v(" "),e("input",{ref:"imgInput",attrs:{id:"from-computer-input",type:"file",name:"profile_pic",accept:"image/*"},on:{change:function(){return t.loadImage(t.$refs.imgInput.files[0])}}})]),t._v(" "),t.error?e("p",{staticClass:"msg-error"},[t._v("\n        "+t._s(t.error)+"\n      ")]):e("div",{staticClass:"hint-container"},[e("p",{staticClass:"text",domProps:{innerHTML:t._s(t.photoRequirementsText)}})])])]):t.modalState===t.MODAL_STATES.CROPPING?e("modal",{key:"crop-avatar",attrs:{id:"modal-avatar"}},[e("div",{staticClass:"modalHeader",attrs:{slot:"header"},slot:"header"},[e("h3",[t._v(t._s(t.translations.topBarHeader))]),t._v(" "),e("div",{staticClass:"modalClose",on:{click:t.toggleModal}})]),t._v(" "),e("div",{staticClass:"modalMain",attrs:{slot:"main"},slot:"main"},[e("div",{staticClass:"crop-container"},[e("img",{ref:"imgToCrop",staticClass:"to-crop",class:{hidden:t.cropperShown},attrs:{src:t.imgData},on:{load:t.onCropperLoad,error:t.onCropperError}}),t._v(" "),e("div",{staticClass:"zoom-slider-container"},[e("button",{on:{click:t.onZoomSliderMinus}},[t._v("\n            -\n          ")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.zoomSliderValue,expression:"zoomSliderValue"}],ref:"sliderInput",staticClass:"zoom-slider",attrs:{type:"range",step:"0.01"},domProps:{value:t.zoomSliderValue},on:{__r:function(e){t.zoomSliderValue=e.target.value}}}),t._v(" "),e("button",{on:{click:t.onZoomSliderPlus}},[t._v("\n            +\n          ")])])])]),t._v(" "),e("div",{staticClass:"modalFooter",attrs:{slot:"footer"},slot:"footer"},[e("div",{staticClass:"secondaryButton",on:{click:t.selectDifferentPicture}},[t._v("\n        "+t._s(t.translations.useDifferentPicture)+"\n      ")]),t._v(" "),e("div",{staticClass:"primaryButton",on:{click:t.setProfilePicture}},[t._v("\n        "+t._s(t.translations.setProfilePicture)+"\n      ")])])]):t.modalState===t.MODAL_STATES.UPLOADING?e("modal",{key:"uploading-avatar",attrs:{id:"modal-avatar"}},[e("div",{staticClass:"modalHeader",attrs:{slot:"header"},slot:"header"},[e("h3",[t._v(t._s(t.translations.topBarHeader))]),t._v(" "),e("div",{staticClass:"modalClose",on:{click:t.toggleModal}})]),t._v(" "),e("div",{staticClass:"modalMain",attrs:{slot:"main"},slot:"main"},[e("div",{staticClass:"loading-container"},[e("spinner"),t._v(" "),t.uploading?e("p",{staticClass:"text"},[t._v("\n          "+t._s(t.translations.uploading)+"\n        ")]):e("p",{staticClass:"text"},[t._v("\n          "+t._s(t.translations.validating)+"\n        ")])],1)])]):t._e()],1)};p._withStripped=!0;var f=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal",attrs:{id:t.id}},[e("div",{staticClass:"modalContainer"},[t._t("header"),t._v(" "),t._t("main"),t._v(" "),t._t("footer")],2)])};f._withStripped=!0;var h=n(46417);const v={props:{id:{type:String,required:!0}},mounted:function(){var t=this;(0,h.Fr)()&&(window.onscroll=this.setScrollPosition,this.$nextTick((function(){t.saveScrollPosition(),t.$scrollTo("#".concat(t.id),100)})))},beforeDestroy:function(){(0,h.Fr)()&&this.restoreScrollPosition()},methods:{setScrollPosition:function(){document.documentElement.style.setProperty("--scroll-y","".concat(window.scrollY,"px"))},saveScrollPosition:function(){var t=document.documentElement.style.getPropertyValue("--scroll-y");document.body.style.position="fixed",document.body.style.top="-".concat(t)},restoreScrollPosition:function(){var t=document.body.style.top;document.body.style.position="",document.body.style.top="",window.scrollTo(0,-1*parseInt(t||"0"))}}};var m=n(14486);const y=(0,m.A)(v,f,[],!1,null,null,null).exports;var g=n(65643),b=n.n(g),_=n(71083),w=n(35311);_.A.interceptors.response.use((function(t){return t}),(function(t){if(401!==t.response.status)return Promise.reject(t);window.location.reload()}));var S=function(t){var e=t.username,n=t.fullname,r=t.country;return(0,_.A)({method:"PATCH",headers:(0,h.oS)(),data:{username:e,fullname:n,country:r},url:w.k$})},C=function(t,e){return(0,_.A)({method:"POST",headers:(0,h.oS)(),url:(0,w.cO)(t),data:e})};function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function O(){O=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof y?e:y,s=Object.create(i.prototype),a=new B(r||[]);return o(s,"_invoke",{value:E(t,n,a)}),s}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var p="suspendedStart",f="suspendedYield",h="executing",v="completed",m={};function y(){}function g(){}function b(){}var _={};l(_,s,(function(){return this}));var w=Object.getPrototypeOf,S=w&&w(w(F([])));S&&S!==n&&r.call(S,s)&&(_=S);var C=b.prototype=y.prototype=Object.create(_);function P(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function n(o,i,s,a){var c=d(t[o],t,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==k(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,s,a)}),(function(t){n("throw",t,s,a)})):e.resolve(u).then((function(t){l.value=t,s(l)}),(function(t){return n("throw",t,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,n,r){var o=p;return function(i,s){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===i)throw s;return{value:t,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=A(a,r);if(c){if(c===m)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=d(e,n,r);if("normal"===l.type){if(o=r.done?v:f,l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=v,r.method="throw",r.arg=l.arg)}}}function A(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,A(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var i=d(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var s=i.arg;return s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function B(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function F(e){if(e||""===e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(k(e)+" is not iterable")}return g.prototype=b,o(C,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,c,"GeneratorFunction")),t.prototype=Object.create(C),t},e.awrap=function(t){return{__await:t}},P(T.prototype),l(T.prototype,a,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var s=new T(u(t,n,r,o),i);return e.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},P(C),l(C,c,"Generator"),l(C,s,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=F,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return a.type="throw",a.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),l=r.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:F(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}function P(t,e,n,r,o,i,s){try{var a=t[i](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,o)}function T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?T(Object(n),!0).forEach((function(e){A(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function A(t,e,n){return(e=function(t){var e=function(t){if("object"!=k(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==k(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const x={name:"Avatar",components:{Modal:y,Spinner:n(39593).A},mixins:[d.ch],props:{filesizeLimit:{type:Number,required:!0}},data:function(){return E(E({MODAL_STATES:{CLOSED:null,SELECTING:1,CROPPING:2,UPLOADING:3}},{modalState:null,uploading:!1,validating:!1,cropperShown:!1,imgData:null,imgType:null,cropper:null,uploadJobID:null,uploadURL:null,uploadParams:null,interval:null,error:null,zoomSliderValue:0,overlayShown:!1}),{},{contextMenuVisible:!1})},computed:E(E(E({},(0,u.aH)(["profileImageURL"])),(0,u.aH)({translations:function(t){return t.translations.settings.avatar},extraTranslations:function(t){return t.translations.settings.activeSessions.button}})),{},{photoRequirementsText:function(){return(0,h.FV)(this.translations.photoRequirements,{filesize:this.filesizeLimit})},fileTooBigText:function(){return(0,h.FV)(this.translations.fileTooBig,{filesize:this.filesizeLimit})},hasAvatar:function(){var t;return(null===(t=this.profileImageURL)||void 0===t?void 0:t.split("/").pop())!==w.k_}}),watch:{zoomSliderValue:function(t){if(this.cropper){var e=this.cropper.getContainerData();this.cropper.zoomTo(t,{x:e.width/2,y:e.height/2})}}},methods:{toggleModal:function(){this.contextMenuVisible=!1,this.modalState===this.MODAL_STATES.CLOSED||null===this.modalState?this.modalState=this.MODAL_STATES.SELECTING:(this.modalState=this.MODAL_STATES.CLOSED,this.interval&&clearInterval(this.interval),Object.assign(this,{modalState:null,uploading:!1,validating:!1,cropperShown:!1,imgData:null,imgType:null,cropper:null,uploadJobID:null,uploadURL:null,uploadParams:null,interval:null,error:null,zoomSliderValue:0,overlayShown:!1}))},selectDifferentPicture:function(){Object.assign(this,{modalState:null,uploading:!1,validating:!1,cropperShown:!1,imgData:null,imgType:null,cropper:null,uploadJobID:null,uploadURL:null,uploadParams:null,interval:null,error:null,zoomSliderValue:0,overlayShown:!1}),this.modalState=this.MODAL_STATES.SELECTING},onImgDrop:function(t){var e;if(t.dataTransfer.items){for(var n=0;n<t.dataTransfer.items.length;n++)if("file"===t.dataTransfer.items[n].kind){e=t.dataTransfer.items[n].getAsFile();break}}else e=t.dataTransfer.files[n];this.loadImage(e)},onZoomSliderMinus:function(){var t=this.$refs.sliderInput,e=t.step,n=t.min;this.zoomSliderValue=Math.max(this.zoomSliderValue-5.5*parseFloat(e),n)},onZoomSliderPlus:function(){var t=this.$refs.sliderInput,e=t.step,n=t.max;this.zoomSliderValue=Math.min(this.zoomSliderValue+5.5*parseFloat(e),n)},loadImage:function(t){var e=this;if(["image/png","image/jpeg"].includes(t.type))if(t.size>1024*this.filesizeLimit*1024)this.error=this.fileTooBigText;else{this.error=null;var n=new FileReader;n.onload=function(){e.imgData=n.result,e.imgType=t.type,e.modalState=e.MODAL_STATES.CROPPING},t&&n.readAsDataURL(t)}else this.error=this.translations.fileInvalid},setProfilePicture:function(){var t=this;this.uploading=!0,this.modalState=this.MODAL_STATES.UPLOADING,(0,_.A)({method:"POST",headers:(0,h.oS)(),url:w.ep}).then((function(e){var n=e.data,r=n.id,o=n.upload_url,i=n.upload_params;t.uploadJobID=r,t.uploadURL=o,t.uploadParams=i,t.cropper.getCroppedCanvas().toBlob((function(e){(function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new FormData;for(var o in n)r.append(o,n[o]);return r.append("file",t),(0,_.A)({method:"POST",data:r,headers:(0,h.oS)(),url:e})})(e,t.uploadURL,t.uploadParams).then((function(){t.validating=!0,t.uploading=!1,t.interval=setInterval((function(){var e;(e=t.uploadJobID,(0,_.A)({method:"GET",headers:(0,h.oS)(),url:(0,w._P)(e)})).then((function(e){var n=e.data,r=n.status,o=n.error;r===w.xx.DONE?location.reload():r===w.xx.ERROR&&(t.showToast("msg-error",o),clearInterval(t.interval),t.toggleModal())})).catch((function(e){429===e.response.status||429===e.response.data.error_code?t.showToast("msg-error",t.translations.tooManyRequests):t.showToast("msg-error",t.translations.serverIssues),clearInterval(t.interval),t.toggleModal()}))}),2e3)}))}),t.imgType)})).catch((function(e){t.uploading=!1,t.validating=!1,t.toggleModal(),429===e.response.status||429===e.response.data.error_code?t.showToast("msg-error",t.translations.tooManyRequests):t.showToast("msg-error",t.translations.serverIssues)}))},onCropperLoad:function(){var t=this;this.cropper=new(b())(this.$refs.imgToCrop,{viewMode:1,guides:!1,cropBoxResizable:!1,cropBoxMovable:!1,dragMode:"move",toggleDragModeOnDblclick:!1,zoomOnTouch:!0,zoomOnWheel:!0,zoom:function(e){e.detail.ratio>t.$refs.sliderInput.max?(e.preventDefault(),t.cropper.zoomTo(t.$refs.sliderInput.max)):e.detail.ratio<t.$refs.sliderInput.min&&(e.preventDefault(),t.cropper.zoomTo(t.$refs.sliderInput.min))},ready:function(){var e=t.cropper.getCanvasData(),n=t.cropper.getContainerData(),r=.9*Math.min(e.height,e.width);t.cropper.setCropBoxData({top:(n.height-r)/2,left:(n.width-r)/2,width:r,height:r});var o=t.cropper.getImageData(),i=o.width/o.naturalWidth;t.$refs.sliderInput.max=Math.max(Math.ceil(i),Math.floor(i)+1),t.$refs.sliderInput.min=i,t.zoomSliderValue=i,t.$refs.imgToCrop.addEventListener("zoom",(function(e){t.zoomSliderValue=e.detail.ratio}))}}),this.cropperShown=!0},onCropperError:function(){this.error=this.translations.fileInvalid,this.modalState=this.MODAL_STATES.SELECTING},deleteAvatar:function(){return(t=O().mark((function t(){return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,_.A)({method:"DELETE",headers:(0,h.oS)(),url:w.t1});case 2:location.reload();case 3:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function s(t){P(i,r,o,s,a,"next",t)}function a(t){P(i,r,o,s,a,"throw",t)}s(void 0)}))})();var t},toggleContextMenu:function(){this.contextMenuVisible=!this.contextMenuVisible}}},j=(0,m.A)(x,p,[],!1,null,null,null).exports;var B=function(){var t=this,e=t._self._c;return e("div",{staticClass:"message-banner",on:{click:function(e){return t.$emit("click")}}},[e("p",[t._v(t._s(t.message))]),t._v(" "),e("div",{staticClass:"close-button",on:{click:function(e){return e.stopPropagation(),t.$emit("close")}}},[e("div",{staticClass:"icon"})])])};B._withStripped=!0;const F={name:"MessageBanner",props:{message:{type:String,required:!0}}},D=(0,m.A)(F,B,[],!1,null,null,null).exports;var $=function(){var t=this,e=t._self._c;return e("div",{class:{linksContainer:!0,linksAtBottom:t.linksAtBottom}},[e("link-button",{staticClass:"sync",attrs:{url:t.urls.syncUrl,translations:t.translations.sync}}),t._v(" "),e("link-button",{staticClass:"forums",attrs:{url:t.urls.forumsUrl,translations:t.translations.forums}}),t._v(" "),t.showSubscriptions?e("link-button",{staticClass:"subscriptions",attrs:{route:"/subscriptions",translations:t.translations.subscriptions}}):t._e()],1)};$._withStripped=!0;var M=function(){var t=this,e=t._self._c;return e("div",{staticClass:"linkButton",on:{click:t.onClick}},[e("div",{staticClass:"linkIcon"}),t._v(" "),e("div",{staticClass:"linkInfo"},[e("div",[e("p",{staticClass:"title"},[t._v("\n        "+t._s(t.translations.title)+"\n      ")]),t._v(" "),e("p",{staticClass:"description"},[t._v("\n        "+t._s(t.translations.text)+"\n      ")])]),t._v(" "),e("button",{staticClass:"primaryButton"},[t._v("\n      "+t._s(t.translations.cta)+"\n    ")])])])};M._withStripped=!0;const L={props:{onClickMethod:{type:Function,required:!1,default:void 0},route:{type:String,required:!1,default:null},translations:{type:Object,required:!0},url:{type:String,required:!1,default:null}},methods:{onClick:function(){this.onClickMethod?this.onClickMethod():this.route?this.$router.replace({path:this.route}):location.href=this.url}}},I={components:{LinkButton:(0,m.A)(L,M,[],!1,null,"1bf2b216",null).exports},props:{translations:{type:Object,required:!0},urls:{type:Object,required:!0},linksAtBottom:{type:Boolean,default:function(){return!1}},showSubscriptions:{type:Boolean,default:function(){return!0}}}},R=(0,m.A)(I,$,[],!1,null,null,null).exports;var U=function(){var t=this,e=t._self._c;return e("div",{staticClass:"profileSection"},[e("h2",[t._v(t._s(t.translations.header))]),t._v(" "),e("fullname-field",{attrs:{translations:t.translations.fullnameSection}}),t._v(" "),e("username-field",{attrs:{translations:t.translations.usernameSection}}),t._v(" "),e("country-field",{attrs:{translations:t.translations.countrySection,"valid-countries":t.validCountries}})],1)};U._withStripped=!0;var N=function(){var t=this,e=t._self._c;return e("section",{attrs:{id:"fullname-section"}},[e("h3",[t._v(t._s(t.translations.header))]),t._v(" "),t.showingForm?e("div",{staticClass:"fieldPair"},[e("div",{staticClass:"left form"},[e("text-input",{attrs:{name:"fullname",validator:{error:t.$v.fullname.$error||t.backendErrorDuringFromSubmission},"error-msg":t.errorFromBackend||t.generalErrorFromBackend,"error-type":{tooLong:!t.$v.fullname.maxLength,backendError:t.backendErrorDuringFromSubmission},translations:t.translations.fullnameInput,"set-focus":!0},on:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onClick.apply(null,arguments)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.hideForm.apply(null,arguments)}]},model:{value:t.$v.fullname.$model,callback:function(e){t.$set(t.$v.fullname,"$model",e)},expression:"$v.fullname.$model"}})],1),t._v(" "),e("div",{staticClass:"right buttonContainer"},[e("loader-button",{staticClass:"primaryButton",attrs:{active:!t.savingForm,label:t.translations.button.save},on:{click:t.onClick}}),t._v(" "),e("div",{staticClass:"secondaryButton",on:{click:t.hideForm}},[t._v("\n        "+t._s(t.translations.button.cancel)+"\n      ")])],1)]):e("div",{staticClass:"fieldPair"},[e("p",{staticClass:"left"},[t._v("\n      "+t._s(t.currentFullname?t.currentFullname:t.translations.hint)+"\n    ")]),t._v(" "),e("div",{staticClass:"right secondaryButton",on:{click:t.showForm}},[t._v("\n      "+t._s(t.changeButtonLabel)+"\n    ")])])])};N._withStripped=!0;var q=n(51380),W=n(33278),H=n(52065);function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function G(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?G(Object(n),!0).forEach((function(e){K(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function K(t,e,n){return(e=function(t){var e=function(t){if("object"!=V(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==V(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const X={mixins:[d.KW],props:{withSudo:{type:Boolean,default:!1}},data:function(){return{showingForm:!1,savingForm:!1,savingFormFailed:!1}},computed:z({},(0,u.L8)(["showingSudoModal"])),methods:z(z({},(0,u.i0)(["showSudoModal"])),{},{sudoModeExpired:function(){var t=(new Date).getTime()/1e3;return this.$store.state.sudoMode.expires<t},showForm:function(){this.withSudo&&this.sudoModeExpired()?(this.showSudoModal(),this.$root.$emit("register-sudo-callbacks",{onGranted:this._showForm})):this._showForm()},_showForm:function(){this.showingForm=!0,this.$v.$reset(),this.beforeShown(),(0,h.Fr)()&&Object.prototype.hasOwnProperty.call(this,"scrollToElement")&&this.$scrollTo(this.scrollToElement,100)},hideForm:function(){this.withSudo&&this.$store.commit("expireSudoMode"),this.showingForm=!1},onSuccess:function(){},onError:function(){},submit:function(){var t=this,e=function(){return t.savingForm=!0,t.makeRequestToAPI().then((function(e){t.hideForm(),t.savingFormFailed=!1,t.onSuccess(e),t.withSudo&&t.$store.commit("expireSudoMode")})).catch((function(e){t.withSudo&&403===e.response.status?(t.showSudoModal(),t.$root.$emit("register-sudo-callbacks",{onGranted:t.submit,onClosed:t.hideForm})):(t.savingFormFailed=!0,t.onError(e.response))})).then((function(){t.savingForm=!1}))};if(!this.withSudo||!this.sudoModeExpired())return e();this.showSudoModal(),this.$root.$emit("register-sudo-callbacks",{onGranted:e,onClosed:this.hideForm})}})},Y=(0,m.A)(X,void 0,void 0,!1,null,null,null).exports;var Q=function(){var t=this,e=t._self._c;return t.active?e("div",{on:{click:function(e){return t.$emit("click")},keyup:function(e){return t.$emit("keyup",e)}}},[t._v("\n  "+t._s(t.label)+"\n")]):e("div",[e("div",{staticClass:"spinner"})])};Q._withStripped=!0;const J={props:{active:{type:Boolean,default:!1},label:{type:String,required:!0}}},Z=(0,m.A)(J,Q,[],!1,null,null,null).exports;var tt=function(t){var e=(0,h.bf)(t);if(e)return{general:e};if(Object.prototype.hasOwnProperty.call(t.data,"errors")){var n=t.data.errors,r={};return n.forEach((function(t){var e=t.field,n=t.detail;e&&"non_field_errors"!==e?r[e]=n:r.general=n})),r}throw new Error("Unexpected server error")};function et(t){return et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},et(t)}function nt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function rt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nt(Object(n),!0).forEach((function(e){ot(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ot(t,e,n){return(e=function(t){var e=function(t){if("object"!=et(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=et(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==et(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const it={components:{TextInput:H.A,LoaderButton:Z},extends:Y,mixins:[q.Hy],props:{translations:{type:Object,required:!0}},data:function(){return{fullname:"",errorFromBackend:"",generalErrorFromBackend:"",scrollToElement:"#fullname-section"}},validations:{fullname:{maxLength:(0,W.Ru)(255)}},computed:rt(rt({},(0,u.aH)({currentFullname:"fullname"})),{},{changeButtonLabel:function(){return this.currentFullname?this.translations.button.change:this.translations.button.set},backendErrorDuringFromSubmission:function(){return this.savingFormFailed&&Boolean(this.errorFromBackend)||this.savingFormFailed&&Boolean(this.generalErrorFromBackend)}}),methods:{beforeShown:function(){this.fullname=this.$store.state.fullname,this.errorFromBackend="",this.generalErrorFromBackend=""},onSuccess:function(t){var e=t.data;this.$store.commit("updateFullname",e.fullname),this.errorFromBackend=null,this.generalErrorFromBackend=null},onError:function(t){var e=tt(t);this.errorFromBackend=e.fullname||null,this.generalErrorFromBackend=e.general||null},makeRequestToAPI:function(){return S({fullname:this.fullname})}}},st=(0,m.A)(it,N,[],!1,null,null,null).exports;var at=function(){var t=this,e=t._self._c;return e("section",{attrs:{id:"username-section"}},[e("h3",[t._v(t._s(t.translations.header))]),t._v(" "),t.currentUsername?e("div",{staticClass:"fieldPair"},[e("p",{staticClass:"left"},[t._v("\n      "+t._s(t.currentUsername)+"\n    ")])]):[t.showingForm?e("div",{staticClass:"fieldPair"},[e("div",{staticClass:"left form"},[e("text-input",{attrs:{name:"username",autocomplete:"off",validator:{error:t.$v.username.$error||t.backendErrorDuringFromSubmission},"error-msg":t.errorFromBackend||t.generalErrorFromBackend,"error-type":{missing:!t.$v.username.required,invalidFormat:!t.$v.username.validFormat,backendError:!t.$v.username.validOnServerSide||t.backendErrorDuringFromSubmission},translations:t.translations.usernameInput,"set-focus":!0},on:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onClick.apply(null,arguments)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.hideForm.apply(null,arguments)}]},model:{value:t.$v.username.$model,callback:function(e){t.$set(t.$v.username,"$model",e)},expression:"$v.username.$model"}})],1),t._v(" "),e("div",{staticClass:"right buttonContainer"},[e("loader-button",{staticClass:"primaryButton",attrs:{active:!t.savingForm,label:t.translations.button.save},on:{click:t.onClick}}),t._v(" "),e("div",{staticClass:"secondaryButton",on:{click:t.hideForm}},[t._v("\n          "+t._s(t.translations.button.cancel)+"\n        ")])],1)]):e("div",{staticClass:"fieldPair"},[e("p",{staticClass:"left"},[t._v("\n        "+t._s(t.translations.hint)+"\n      ")]),t._v(" "),e("div",{staticClass:"right secondaryButton",on:{click:t.showForm}},[t._v("\n        "+t._s(t.translations.button.set)+"\n      ")])])]],2)};function ct(t){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ct(t)}function lt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ut(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?lt(Object(n),!0).forEach((function(e){dt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function dt(t,e,n){return(e=function(t){var e=function(t){if("object"!=ct(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ct(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}at._withStripped=!0;const pt={components:{TextInput:H.A,LoaderButton:Z},extends:Y,mixins:[q.Hy],props:{translations:{type:Object,required:!0}},data:function(){return{username:"",errorFromBackend:"",generalErrorFromBackend:"",scrollToElement:"#username-section"}},validations:{username:{required:W.mw,validFormat:h.IB,validOnServerSide:(0,h.W9)("username","errorFromBackend")}},computed:ut(ut({},(0,u.aH)({currentUsername:"username"})),{},{backendErrorDuringFromSubmission:function(){return this.savingFormFailed&&Boolean(this.errorFromBackend)||this.savingFormFailed&&Boolean(this.generalErrorFromBackend)}}),methods:{beforeShown:function(){this.username=this.$store.state.username,this.errorFromBackend="",this.generalErrorFromBackend=""},onSuccess:function(t){this.$store.commit("updateUsername",t.data.username),this.errorFromBackend=null,this.generalErrorFromBackend=null},onError:function(t){var e=tt(t);this.errorFromBackend=e.username||null,this.generalErrorFromBackend=e.general||null},makeRequestToAPI:function(){return S({username:this.username})}}},ft=(0,m.A)(pt,at,[],!1,null,null,null).exports;var ht=function(){var t=this,e=t._self._c;return e("section",{attrs:{id:"country-section"}},[e("h3",[t._v(t._s(t.translations.header))]),t._v(" "),t.showingForm?e("div",{staticClass:"fieldPair"},[e("div",{staticClass:"left form"},[e("country-input",{attrs:{validator:{error:t.$v.country.$error||t.backendErrorDuringFromSubmission},"error-msg":t.errorFromBackend||t.generalErrorFromBackend,"error-type":{missing:!t.$v.country.required,backendError:t.backendErrorDuringFromSubmission},choices:t.validCountries,translations:t.translations.countryInput,"set-focus":!0},on:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onClick.apply(null,arguments)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.hideForm.apply(null,arguments)}]},model:{value:t.$v.country.$model,callback:function(e){t.$set(t.$v.country,"$model",e)},expression:"$v.country.$model"}})],1),t._v(" "),e("div",{staticClass:"right buttonContainer"},[e("loader-button",{staticClass:"primaryButton",attrs:{active:!t.savingForm,label:t.translations.button.save},on:{click:t.onClick}}),t._v(" "),e("div",{staticClass:"secondaryButton",on:{click:t.hideForm}},[t._v("\n        "+t._s(t.translations.button.cancel)+"\n      ")])],1)]):e("div",{staticClass:"fieldPair"},[e("div",{staticClass:"left"},[e("div",[t._v(t._s(t.countryName?t.countryName:t.translations.hint))])]),t._v(" "),e("div",{staticClass:"right secondaryButton",on:{click:t.showForm}},[t._v("\n      "+t._s(t.translations.button.change)+"\n    ")])])])};function vt(t){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vt(t)}function mt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function yt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?mt(Object(n),!0).forEach((function(e){gt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function gt(t,e,n){return(e=function(t){var e=function(t){if("object"!=vt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=vt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==vt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}ht._withStripped=!0;const bt={components:{CountryInput:n(47305).A,LoaderButton:Z},extends:Y,mixins:[q.Hy],props:{translations:{type:Object,required:!0},validCountries:{type:Array,required:!0}},data:function(){return{country:this.$store.state.country,errorFromBackend:"",generalErrorFromBackend:"",scrollToElement:"#country-section"}},validations:{country:{required:W.mw}},computed:yt(yt({},(0,u.aH)({countryCode:"country"})),{},{countryName:function(){var t=this,e=this.validCountries.find((function(e){return e.code===t.countryCode}));return e?e.country:null},backendErrorDuringFromSubmission:function(){return this.savingFormFailed&&Boolean(this.errorFromBackend)||this.savingFormFailed&&Boolean(this.generalErrorFromBackend)}}),methods:{beforeShown:function(){this.country=this.$store.state.country,this.errorFromBackend="",this.generalErrorFromBackend=""},onSuccess:function(t){var e=t.data;this.$store.commit("updateCountry",e.country),this.generalErrorFromBackend=null},onError:function(t){var e=tt(t);this.errorFromBackend=e.country||null,this.generalErrorFromBackend=e.general||null},makeRequestToAPI:function(){return S({country:this.country})}}},_t={name:"UserInfoForm",components:{FullnameField:st,UsernameField:ft,CountryField:(0,m.A)(bt,ht,[],!1,null,null,null).exports},props:{translations:{type:Object,required:!0},validCountries:{type:Array,required:!0}}},wt=(0,m.A)(_t,U,[],!1,null,null,null).exports;var St=function(){var t=this,e=t._self._c;return e("div",{staticClass:"profileSection"},[e("h2",[t._v(t._s(t.translations.header))]),t._v(" "),e("email-field",{attrs:{translations:t.translations.emailSection,"with-sudo":!0}}),t._v(" "),e("password-field",{attrs:{translations:t.translations.passwordSection,"with-sudo":!0}}),t._v(" "),e("two-factor-auth-field",{attrs:{translations:t.translations.twoFactorAuthSection}})],1)};St._withStripped=!0;var Ct=function(){var t=this,e=t._self._c;return e("section",{attrs:{id:"email-section"}},[e("h3",[t._v(t._s(t.translations.header))]),t._v(" "),t.currentlyInvalid?e("p",{staticClass:"msg-error"},[t._v("\n    "+t._s(t.translations.emailInvalid)+"\n  ")]):t.showReminder?[e("div",{staticClass:"fieldPair"},[e("div",{staticClass:"left"},[e("p",{staticClass:"msg-info",domProps:{innerHTML:t._s(t.emailVerificationReminder)}})]),t._v(" "),t.verificationCancelable?e("loader-button",{staticClass:"right secondaryButton",attrs:{active:!t.cancellingVerificationEmail,label:t.translations.button.cancel},on:{click:t.cancelVerificationEmail}}):t._e()],1),t._v(" "),e("div",{staticClass:"fieldPair"},[e("p",{staticClass:"left"},[t._v("\n        "+t._s(t.translations.activationLink)+"\n      ")]),t._v(" "),e("loader-button",{staticClass:"right secondaryButton",attrs:{active:!t.sendingVerificationEmail,label:t.translations.button.resend},on:{click:t.resendVerificationEmail}})],1)]:t._e(),t._v(" "),t.showingForm?e("div",{staticClass:"fieldPair"},[e("text-input",{staticClass:"left form",attrs:{name:"email",inputmode:"email",validator:{error:t.$v.email.$error||t.backendErrorDuringFromSubmission,pending:t.$v.email.$pending},"error-msg":t.emailErrorFromBackend||t.generalErrorFromBackend,"error-type":{missing:!t.$v.email.required,invalidFormat:!t.$v.email.email,tooLong:!t.$v.email.maxLength,backendError:!t.$v.email.validOnServerSide||t.backendErrorDuringFromSubmission},translations:t.translations.emailInput,"set-focus":!0},on:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onClick.apply(null,arguments)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.hideForm.apply(null,arguments)}]},model:{value:t.$v.email.$model,callback:function(e){t.$set(t.$v.email,"$model",e)},expression:"$v.email.$model"}}),t._v(" "),e("div",{staticClass:"right buttonContainer"},[e("loader-button",{staticClass:"primaryButton",attrs:{active:!t.savingForm,label:t.translations.button.save},on:{click:t.onClick}}),t._v(" "),e("div",{staticClass:"secondaryButton",on:{click:t.hideForm}},[t._v("\n        "+t._s(t.translations.button.cancel)+"\n      ")])],1)],1):e("div",{staticClass:"fieldPair"},[e("p",{staticClass:"left"},[t._v("\n      "+t._s(t.currentAddress)+"\n    ")]),t._v(" "),e("div",{staticClass:"right secondaryButton",on:{click:t.showForm}},[t._v("\n      "+t._s(t.translations.button.change)+"\n    ")])])],2)};function kt(t){return kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kt(t)}function Ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Pt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ot(Object(n),!0).forEach((function(e){Tt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Tt(t,e,n){return(e=function(t){var e=function(t){if("object"!=kt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=kt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==kt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Ct._withStripped=!0;const Et={components:{TextInput:H.A,LoaderButton:Z},extends:Y,mixins:[q.Hy,d.ch],props:{translations:{type:Object,required:!0}},data:function(){return{email:"",emailErrorFromBackend:"",generalErrorFromBackend:"",sendingVerificationEmail:!1,cancellingVerificationEmail:!1,scrollToElement:"#email-section"}},validations:{email:{required:W.mw,email:W.Rp,maxLength:(0,W.Ru)(255),validOnServerSide:(0,h.W9)("email","emailErrorFromBackend")}},computed:Pt(Pt({},(0,u.aH)({currentAddress:function(t){return t.email.address},currentlyVerified:function(t){return t.email.isVerified},currentlyInvalid:function(t){return t.email.isInvalid},currentPendingAddress:function(t){return t.email.pendingAddress}})),{},{emailToVerify:function(){return this.currentPendingAddress?this.currentPendingAddress:this.currentAddress},verificationCancelable:function(){return!!this.currentPendingAddress},showReminder:function(){return!this.currentlyVerified||this.currentlyVerified&&this.currentPendingAddress},emailVerificationReminder:function(){var t=this.translations.verificationPending;return(0,h.FV)(t,{email:"<strong>"+this.$escape(this.emailToVerify)+"</strong>"})},backendErrorDuringFromSubmission:function(){return this.savingFormFailed&&Boolean(this.emailErrorFromBackend)||this.savingFormFailed&&Boolean(this.generalErrorFromBackend)}}),methods:{resendVerificationEmail:function(){var t,e=this;return this.sendingVerificationEmail=!0,(t=this.emailToVerify,(0,_.A)({method:"POST",headers:(0,h.oS)(),data:{email:t},url:w.ZO})).then((function(){e.showToast("msg-success",e.translations.emailSent)})).catch((function(t){var n=tt(t.response);e.showToast("msg-error",n.error||n.general)})).then((function(){e.sendingVerificationEmail=!1}))},cancelVerificationEmail:function(){var t,e=this;return this.cancellingVerificationEmail=!0,(t=this.emailToVerify,(0,_.A)({method:"POST",headers:(0,h.oS)(),data:{email:t},url:w.sv})).then((function(t){var n=t.data;e.$store.commit("updateEmailInfo",{address:n.email,isVerified:n.verified,pendingAddress:n.pending_email})})).catch((function(t){if(404!==t.response.status){var n=tt(t.response);e.showToast("msg-error",n.error||n.general)}else e.$store.commit("updateEmailInfo",{address:e.currentAddress,isVerified:e.currentlyVerified,pendingAddress:null})})).then((function(){e.cancellingVerificationEmail=!1}))},beforeShown:function(){this.email=this.$store.state.email.address,this.errorFromBackend="",this.generalErrorFromBackend=""},onSuccess:function(t){var e=t.data;this.$store.commit("updateEmailInfo",{address:e.email,isVerified:e.verified,pendingAddress:e.pending_email}),this.emailErrorFromBackend=null,this.generalErrorFromBackend=null},onError:function(t){var e=tt(t);this.emailErrorFromBackend=e.email||null,this.generalErrorFromBackend=e.general||null},makeRequestToAPI:function(){return t=this.email,(0,_.A)({method:"PUT",headers:(0,h.oS)(),data:{email:t},url:w.Kp});var t}}},At=(0,m.A)(Et,Ct,[],!1,null,null,null).exports;var xt=function(){var t=this,e=t._self._c;return e("section",{attrs:{id:"password-section"}},[e("h3",[t._v(t._s(t.translations.header))]),t._v(" "),t.showingForm?e("div",{staticClass:"fieldPair"},[e("div",{staticClass:"left form"},[e("password-input",{attrs:{type:"new",autocomplete:"new-password",validator:{error:t.$v.newPassword.$error||t.backendErrorDuringFromSubmission},"error-msg":t.newPasswordErrorFromBackend||t.generalErrorFromBackend,"error-type":{missing:!t.$v.newPassword.required,invalidFormat:!t.$v.newPassword.validFormat,backendError:!t.$v.newPassword.validOnServerSide||t.backendErrorDuringFromSubmission},translations:t.translations.passwordInput,"set-focus":!0},on:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onClick.apply(null,arguments)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.hideForm.apply(null,arguments)}]},model:{value:t.$v.newPassword.$model,callback:function(e){t.$set(t.$v.newPassword,"$model",e)},expression:"$v.newPassword.$model"}}),t._v(" "),e("password-input",{attrs:{type:"repeat",autocomplete:"new-password","helper-text":!1,validator:{error:t.$v.repeatedPassword.$error},"error-type":{missing:!t.$v.repeatedPassword.required,differentFromOther:!t.$v.repeatedPassword.sameAsPassword},translations:t.translations.passwordInput},on:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onClick.apply(null,arguments)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.hideForm.apply(null,arguments)}]},model:{value:t.$v.repeatedPassword.$model,callback:function(e){t.$set(t.$v.repeatedPassword,"$model",e)},expression:"$v.repeatedPassword.$model"}})],1),t._v(" "),e("div",{staticClass:"right buttonContainer"},[e("loader-button",{staticClass:"primaryButton",attrs:{active:!t.savingForm,label:t.translations.button.save},on:{click:t.onClick}}),t._v(" "),e("div",{staticClass:"secondaryButton",on:{click:t.hideForm}},[t._v("\n        "+t._s(t.translations.button.cancel)+"\n      ")])],1)]):e("div",{staticClass:"fieldPair"},[e("p",{staticClass:"left"},[t._v("\n      "+t._s(t.hintText)+"\n    ")]),t._v(" "),e("div",{staticClass:"right secondaryButton",attrs:{"data-tid":"edit-profile-password"},on:{click:t.showForm}},[t._v("\n      "+t._s(t.hiddenFormButtonText)+"\n    ")])])])};xt._withStripped=!0;var jt=n(84539);const Bt={name:"PasswordField",components:{PasswordInput:jt.A,LoaderButton:Z},extends:Y,mixins:[q.Hy,d.ch],props:{translations:{type:Object,required:!0}},data:function(){return{newPassword:"",newPasswordErrorFromBackend:"",repeatedPassword:"",generalErrorFromBackend:"",scrollToElement:"#password-section"}},computed:{hintText:function(){return this.$store.state.hasPassword?this.translations.subheader:this.translations.hint},hiddenFormButtonText:function(){return this.$store.state.hasPassword?this.translations.button.change:this.translations.button.set},backendErrorDuringFromSubmission:function(){return this.savingFormFailed&&Boolean(this.newPasswordErrorFromBackend)||this.savingFormFailed&&Boolean(this.generalErrorFromBackend)}},validations:{newPassword:{required:W.mw,validFormat:h.jg,validOnServerSide:(0,h.W9)("password","newPasswordErrorFromBackend")},repeatedPassword:{required:W.mw,sameAsPassword:(0,W.f4)("newPassword")}},methods:{beforeShown:function(){this.newPassword=this.$store.state.newPassword,this.newPasswordErrorFromBackend="",this.generalErrorFromBackend="",this.repeatedPassword=""},onSuccess:function(){this.newPasswordErrorFromBackend=null,this.$store.commit("setPasswordState",!0),this.showToast("msg-success",this.translations.success)},onError:function(t){var e=tt(t);this.newPasswordErrorFromBackend=e.new_password||null,this.generalErrorFromBackend=e.general||null},makeRequestToAPI:function(){return t=this.newPassword,e=this.repeatedPassword,(0,_.A)({method:"PUT",headers:(0,h.oS)(),data:{new_password:t,new_password_repeated:e},url:w.dg});var t,e}}},Ft=(0,m.A)(Bt,xt,[],!1,null,null,null).exports;var Dt=function(){var t=this,e=t._self._c;return e("section",{attrs:{id:"two-factor-auth-section"}},[e("h3",[t._v(t._s(t.translations.header))]),t._v(" "),e("div",[t.WebAuthnDevices.length||t.TOTPDevices.length?t._e():e("div",{staticClass:"fieldPair"},[t.emailVerified?t._e():e("p",{staticClass:"left msg-info"},[t._v("\n        "+t._s(t.translations.emailVerificationNeeded)+"\n      ")])]),t._v(" "),t.TOTPDevices.length?e("div",{staticClass:"fieldPair"},[e("p",{staticClass:"left"},[t._v("\n        "+t._s(t.translations.setupActive)+"\n      ")])]):e("div",{staticClass:"fieldPair"},[e("div",{staticClass:"left"},[e("p",[t._v(t._s(t.translations.subheader))])])]),t._v(" "),t.TOTPDevices.length?e("div",{staticClass:"fieldPair"},[e("p",{staticClass:"left"},[t._v("\n        "+t._s(t.translations.totpSubHeader)+"\n      ")]),t._v(" "),e("loader-button",{staticClass:"right secondaryButton",attrs:{active:!t.loading.totp,label:t.translations.deactivateTOTP},on:{click:function(){return t.deleteOTPDevice(t.deviceTypes.TOTP,t.TOTPDevices[0].id)}}})],1):e("div",{staticClass:"fieldPair"},[e("p",{staticClass:"left"},[t._v("\n        "+t._s(t.translations.totpSubHeader)+"\n      ")]),t._v(" "),e("div",{staticClass:"right"},[t.emailVerified?e("div",{staticClass:"secondaryButton",on:{click:t.showWizard}},[t._v("\n          "+t._s(t.translations.activateTOTP)+"\n        ")]):e("div",{staticClass:"secondaryButton",attrs:{disabled:""}},[t._v("\n          "+t._s(t.translations.activateTOTP)+"\n        ")])])]),t._v(" "),t.userHasWebauthnEnabled?e("div",{staticClass:"fieldPair"},[e("p",{staticClass:"left"},[t._v("\n        "+t._s(t.translations.webAuthnSubHeader)+"\n      ")]),t._v(" "),t.showingWebAuthnManage||!t.WebAuthnDevices.length?e("div",{staticClass:"right buttonContainer"},[!t.showingWebAuthnManage||t.showingAddSecurityKey&&!t.WebAuthnDevices.length?t._e():e("div",{staticClass:"hide-webauthn",attrs:{"data-tid":"hide-webauthn-manage-button"},on:{click:t.hideWebAuthnManage}},[t._v("\n          "+t._s(t.translations.button.hide)+"\n        ")]),t._v(" "),t.emailVerified?e("div",{staticClass:"secondaryButton",attrs:{"data-tid":"add-security-key-button"},on:{click:t.addSecurityKey}},[t._v("\n          "+t._s(t.translations.addSecurityKey)+"\n        ")]):e("div",{staticClass:"secondaryButton",attrs:{disabled:"","data-tid":"add-security-key-button"}},[t._v("\n          "+t._s(t.translations.addSecurityKey)+"\n        ")])]):e("div",{staticClass:"right buttonContainer"},[e("div",{staticClass:"secondaryButton",attrs:{"data-tid":"manage-webauthn-devices-button"},on:{click:t.showWebAuthnManageModal}},[t._v("\n          "+t._s(t.translations.manageWebAuthnDevices)+"\n        ")])])]):t._e(),t._v(" "),t.showingWebAuthnManage?e("div",[t.showingAddSecurityKey||t.showingEditWebAuthnDeviceName?e("div",{staticClass:"securityKeyCard",attrs:{"data-tid":"security-key-card"}},[e("div",{staticClass:"left form"},[e("div",{staticClass:"header"},[t._v("\n            \n          ")]),t._v(" "),e("text-input",{attrs:{name:"deviceName",validator:{error:t.$v.deviceName.$error||Boolean(t.deviceNameErrorFromBackend)},translations:t.translations.webAuthnDeviceNameInput,"set-focus":!0,tabindex:71,"error-type":{missing:!t.$v.deviceName.required,backendError:t.deviceNameErrorFromBackend,tooLong:!t.$v.deviceName.maxLength},"error-msg":t.deviceNameErrorFromBackend,"data-tid":"add-security-key-input"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.saveWebAuthnDevice.apply(null,arguments)},input:function(){return t.deviceNameErrorFromBackend=null}},model:{value:t.$v.deviceName.$model,callback:function(e){t.$set(t.$v.deviceName,"$model",e)},expression:"$v.deviceName.$model"}})],1),t._v(" "),e("div",{staticClass:"right buttonContainer"},[e("loader-button",{staticClass:"secondaryButton set-security-key",attrs:{active:!t.loading.webauthn,label:t.translations.setSecurityKey,"data-tid":"set-security-key-button",tabindex:"72"},on:{click:t.saveWebAuthnDevice}}),t._v(" "),e("div",{staticClass:"secondaryButton",attrs:{"data-tid":"add-security-key-cancel-button",tabindex:"73"},on:{click:t.hideAddSecurityKey}},[t._v("\n            "+t._s(t.translations.button.cancel)+"\n          ")])],1)]):t._e(),t._v(" "),t._l(t.WebAuthnDevices,(function(n){return e("div",{key:n.id},[t.editedDeviceID!=n.id?e("div",{staticClass:"securityKeyCard",attrs:{"data-tid":"security-key-card","data-device-id":n.id}},[e("div",{staticClass:"left form"},[t._m(0,!0),t._v(" "),e("div",[e("div",{staticClass:"webauthn-name-container"},[e("div",{staticClass:"name",attrs:{"data-tid":"webauthn-device-name"}},[t._v("\n                  "+t._s(n.name)+"\n                ")]),t._v(" "),e("div",{staticClass:"edit-icon",attrs:{"data-tid":"edit-webauthn-device-name-button"},on:{click:function(e){return t.showEditWebAuthnDeviceName(n)}}})]),t._v(" "),e("div",{staticClass:"webauthn-dates"},[e("div",{staticClass:"created-at"},[t._v("\n                  "+t._s(t.translations.created)+"\n                  "+t._s(t.formatTimestamp(n.created_at,!0))+"\n                ")]),t._v(" "),n.last_used_at?e("div",{staticClass:"last-used-at"},[t._v("\n                  "+t._s(t.translations.lastUsed)+"\n                  "+t._s(t.formatTimestamp(n.last_used_at))+"\n                ")]):t._e()])])]),t._v(" "),e("div",{staticClass:"right buttonContainer"},[e("div",{staticClass:"delete-security-key",attrs:{"data-tid":"delete-security-key-button",tabindex:"74"},on:{click:function(e){return t.deleteOTPDevice(n.type,n.id)}}})])]):t._e()])}))],2):t._e(),t._v(" "),t.WebAuthnDevices.length||t.TOTPDevices.length?e("div",{staticClass:"fieldPair"},[e("p",{staticClass:"left"},[t._v("\n        "+t._s(t.translations.recoverySubHeader)+"\n      ")]),t._v(" "),e("div",{staticClass:"right secondaryButton generateBackupCodes",on:{click:t.showRegenerateWizard}},[t._v("\n        "+t._s(t.translations.button.regenerate)+"\n      ")])]):t._e(),t._v(" "),t.showingRegenerateWizard?[t.currentStep===t.regenerationWizardSteps.INTRO?e("modal",{key:t.currentStep,attrs:{id:"modal-2fa"}},[e("div",{staticClass:"modalHeader",attrs:{slot:"header"},slot:"header"},[e("h3",[t._v(t._s(t.translations.header))]),t._v(" "),e("div",{staticClass:"modalClose",on:{click:t.resetSetup}})]),t._v(" "),e("div",{staticClass:"modalMain",attrs:{slot:"main"},slot:"main"},[e("img",{staticClass:"mainImg",attrs:{src:n(38359),alt:"sync"}}),t._v(" "),e("h2",[t._v(t._s(t.translations.regenerateIntroHeader))]),t._v(" "),e("p",{staticClass:"text"},[t._v("\n            "+t._s(t.translations.regenerateIntroDescription)+"\n          ")]),t._v(" "),e("p",{staticClass:"smallText"},[t._v("\n            "+t._s(t.translations.regenerateIntroWarning)+"\n          ")]),t._v(" "),e("div",{staticClass:"buttonContainer"},[e("loader-button",{staticClass:"primaryButton",attrs:{active:!t.loading.static,label:t.translations.button.start},on:{click:t.initiateRegenerateFlow}})],1)])]):t.currentStep===t.regenerationWizardSteps.SAVE_RECOVERY_CODES?e("modal",{key:t.currentStep,attrs:{id:"modal-2fa"}},[e("div",{staticClass:"modalHeader",attrs:{slot:"header"},slot:"header"},[e("div",{staticClass:"modalClose",on:{click:t.resetSetup}})]),t._v(" "),e("div",{staticClass:"modalMain",attrs:{slot:"main"},slot:"main"},[e("h2",[t._v(t._s(t.translations.saveRecoveryCodesHeader))]),t._v(" "),e("p",{staticClass:"text"},[t._v("\n            "+t._s(t.translations.saveRecoveryCodesSubheader)+"\n          ")]),t._v(" "),e("div",{attrs:{id:t.recoveryCodesContainerID}},t._l(t.recoveryCodes,(function(n){return e("p",{key:n,staticClass:"recoveryCode"},[t._v("\n              "+t._s(n)+"\n            ")])})),0),t._v(" "),e("div",{staticClass:"saveCodeButtonContainer"},t._l(t.saveCodeButtons,(function(n){return e("div",{key:n,staticClass:"saveCodeButton",attrs:{id:n+"RegenerateCodeButton"},on:{click:function(){return t.onSaveCodeClick(n,"RegenerateCodeButton")}}},[t._v("\n              "+t._s(t.translations.button[n])+"\n            ")])})),0),t._v(" "),e("div",{staticClass:"buttonContainer"},[t.saveRecoveryCodeClicked?e("loader-button",{staticClass:"primaryButton",attrs:{active:!t.loading.static,label:t.translations.button.finish},on:{click:t.removeOldDevice}}):e("div",{staticClass:"primaryButton",attrs:{disabled:""}},[t._v("\n              "+t._s(t.translations.button.finish)+"\n            ")])],1)])]):t._e()]:t._e(),t._v(" "),t.showingWizard||t.showingSaveRecoveryCodes?[t.currentStep===t.wizardSteps.TWO_FACTOR_INTRO?e("modal",{key:t.currentStep,attrs:{id:"modal-2fa"}},[e("div",{staticClass:"modalHeader",attrs:{slot:"header"},slot:"header"},[e("h3",[t._v(t._s(t.translations.header))]),t._v(" "),e("div",{staticClass:"modalClose",on:{click:t.resetSetup}})]),t._v(" "),e("div",{staticClass:"modalMain",attrs:{slot:"main"},slot:"main"},[e("img",{staticClass:"mainImg",attrs:{src:n(38359),alt:"sync"}}),t._v(" "),e("h2",[t._v(t._s(t.translations.introHeader))]),t._v(" "),e("p",{staticClass:"text"},[t._v("\n            "+t._s(t.translations.introDescription)+"\n          ")]),t._v(" "),e("p",{staticClass:"smallText"},[t._v("\n            "+t._s(t.translations.introWarningPart1)+"\n          ")]),t._v(" "),e("div",{staticClass:"buttonContainer"},[e("loader-button",{staticClass:"primaryButton",attrs:{active:!t.loading.totp||!t.loading.static,label:t.translations.button.start},on:{click:t.initiateOTPFlow}})],1)])]):t.currentStep===t.wizardSteps.SCAN_QR_CODE?e("modal",{key:t.currentStep,attrs:{id:"modal-2fa"}},[e("div",{staticClass:"modalHeader",attrs:{slot:"header"},slot:"header"},[e("h3",[t._v(t._s(t.stepsIndicatorString))]),t._v(" "),e("div",{staticClass:"modalClose",on:{click:t.resetSetup}})]),t._v(" "),e("div",{staticClass:"modalMain",attrs:{slot:"main"},slot:"main"},[e("h2",[t._v(t._s(t.translations.scanQRCodeHeader))]),t._v(" "),e("p",{staticClass:"text",domProps:{innerHTML:t._s(t.scanQRCodeDescription)}}),t._v(" "),e("div",{staticClass:"codesContainer"},[e("div",{attrs:{id:"qrCode"}},[e("span",{domProps:{innerHTML:t._s(t.qrCodeSvgImage)}})]),t._v(" "),e("div",{attrs:{id:"explicitCode"}},[e("p",{staticClass:"smallText"},[t._v("\n                "+t._s(t.translations.enterCodeManually)+"\n              ")]),t._v(" "),e("p",{staticClass:"smallText"},[t._v("\n                "+t._s(t.secretFormatted)+"\n              ")])])]),t._v(" "),e("div",{staticClass:"buttonContainer"},[e("div",{staticClass:"secondaryButton",on:{click:t.showWizard}},[t._v("\n              "+t._s(t.translations.button.back)+"\n            ")]),t._v(" "),e("div",{staticClass:"primaryButton",on:{click:t.showQRCodeInput}},[t._v("\n              "+t._s(t.translations.button.next)+"\n            ")])])])]):t.currentStep===t.wizardSteps.TYPE_QR_CODE?e("modal",{key:t.currentStep,attrs:{id:"modal-2fa"}},[e("div",{staticClass:"modalHeader",attrs:{slot:"header"},slot:"header"},[e("h3",[t._v(t._s(t.stepsIndicatorString))]),t._v(" "),e("div",{staticClass:"modalClose",on:{click:t.resetSetup}})]),t._v(" "),e("div",{staticClass:"modalMain",attrs:{slot:"main"},slot:"main"},[e("h2",[t._v(t._s(t.typeQRCodeHeader))]),t._v(" "),e("p",{staticClass:"text"},[t._v("\n            "+t._s(t.translations.typeQRCodeSubheader)+"\n          ")]),t._v(" "),e("div",{staticClass:"form"},[e("otp-code",{attrs:{"code-type":t.deviceTypes.TOTP,"set-focus":!t.isMobile(),"num-inputs":t.totpCodeLength,validator:{error:t.$v.otpCode.$error||Boolean(t.otpCodeErrorFromBackend)},"error-msg":t.otpCodeErrorFromBackend,"error-type":{missing:!t.$v.otpCode.required,backendError:!t.$v.otpCode.validFormat},translations:t.translations.otpInput},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:function(){return t.createOTPDevice(t.deviceTypes.TOTP)}.apply(null,arguments)},input:function(){return t.otpCodeErrorFromBackend=null}},model:{value:t.$v.otpCode.$model,callback:function(e){t.$set(t.$v.otpCode,"$model",e)},expression:"$v.otpCode.$model"}})],1),t._v(" "),e("div",{staticClass:"buttonContainer"},[e("loader-button",{staticClass:"secondaryButton",attrs:{active:!(t.loading.totp&&t.backButtonClicked),label:t.translations.button.back},on:{click:t.goBackToInitiateOTPFlow}}),t._v(" "),e("loader-button",{staticClass:"primaryButton",attrs:{active:!(t.loading.totp&&!t.backButtonClicked),label:t.translations.button.next},on:{click:function(){return t.createOTPDevice(t.deviceTypes.TOTP)}}})],1)])]):t.currentStep===t.wizardSteps.SAVE_RECOVERY_CODES||t.showingSaveRecoveryCodes?e("modal",{key:t.currentStep,attrs:{id:"modal-2fa"}},[t.showingSaveRecoveryCodes?e("div",{staticClass:"modalHeader",attrs:{slot:"header"},slot:"header"},[e("h3"),t._v(" "),e("div",{staticClass:"modalClose",attrs:{"data-tid":"cancel-saving-recovery-codes-button"},on:{click:t.hideSaveRecoveryCodes}})]):e("div",{staticClass:"modalHeader",attrs:{slot:"header"},slot:"header"},[e("h3",[t._v(t._s(t.stepsIndicatorString))]),t._v(" "),e("div",{staticClass:"modalClose",on:{click:t.resetSetup}})]),t._v(" "),e("div",{staticClass:"modalMain",attrs:{slot:"main"},slot:"main"},[e("h2",[t._v(t._s(t.translations.saveRecoveryCodesHeader))]),t._v(" "),e("p",{staticClass:"text"},[t._v("\n            "+t._s(t.translations.saveRecoveryCodesSubheader)+"\n          ")]),t._v(" "),e("div",{attrs:{id:t.recoveryCodesContainerID}},t._l(t.recoveryCodes,(function(n){return e("p",{key:n,staticClass:"recoveryCode"},[t._v("\n              "+t._s(n)+"\n            ")])})),0),t._v(" "),e("div",{staticClass:"saveCodeButtonContainer"},t._l(t.saveCodeButtons,(function(n){return e("div",{key:n,staticClass:"saveCodeButton",attrs:{id:n+"CodeButton","data-tid":"save-code-"+n+"-button"},on:{click:function(){return t.onSaveCodeClick(n,"CodeButton")}}},[t._v("\n              "+t._s(t.translations.button[n])+"\n            ")])})),0),t._v(" "),e("div",{staticClass:"buttonContainer"},[t.saveRecoveryCodeClicked?e("loader-button",{staticClass:"primaryButton",attrs:{active:!t.loading.totp||!t.loading.webauthn,"data-tid":"2fa-flow-finish-button",label:t.translations.button.finish},on:{click:function(e){t.showingSaveRecoveryCodes?t.enableOTPDevice(t.deviceTypes.WEBAUTHN,t.device.id):t.enableOTPDevice(t.deviceTypes.TOTP,t.device.id)}}}):e("div",{staticClass:"primaryButton",attrs:{disabled:""}},[t._v("\n              "+t._s(t.translations.button.finish)+"\n            ")])],1)])]):t._e()]:t._e()],2)])};Dt._withStripped=!0;var $t=n(57576),Mt=n.n($t),Lt=n(45162),It=n.n(Lt),Rt=n(87583),Ut=n(74516),Nt=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Date(1e3*e),o={timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone,year:"numeric",month:"long",day:"numeric",hour:n?void 0:"numeric",minute:n?void 0:"numeric"};return r.toLocaleString(t,o)},qt=n(74043);function Wt(t){return Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wt(t)}function Ht(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Vt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ht(Object(n),!0).forEach((function(e){Gt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Gt(t,e,n){return(e=function(t){var e=function(t){if("object"!=Wt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Wt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Wt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var zt={WIZARD_NOT_SHOWN:-1,TWO_FACTOR_INTRO:0,SCAN_QR_CODE:1,TYPE_QR_CODE:2,SAVE_RECOVERY_CODES:3},Kt={INTRO:0,SAVE_RECOVERY_CODES:1},Xt=function(){return{currentStep:zt.WIZARD_NOT_SHOWN,showingWizard:!1,showingWebAuthnManage:!1,showingRegenerateWizard:!1,qrCodeSvgImage:"",qrSecret:"",webAuthnToken:"",otpCode:"",deviceName:"",otpCodeErrorFromBackend:null,deviceNameErrorFromBackend:null,saveRecoveryCodeClicked:!1,device:null,recoveryCodes:[],loading:{totp:!1,webauthn:!1,static:!1},clipboard:null,backButtonClicked:!1,recoveryCodesContainerID:Qt,showingSaveRecoveryCodes:!1,showingAddSecurityKey:!1,showingEditWebAuthnDeviceName:!1,editedDeviceID:null}},Yt=function(t){return t.getTime()/1e3},Qt="recoveryCodesContainer";const Jt={components:{Modal:y,OtpCode:Ut.A,LoaderButton:Z,TextInput:H.A},mixins:[q.Hy,d.ch],props:{translations:{type:Object,required:!0}},data:function(){return Xt()},validations:{otpCode:{required:W.mw},deviceName:{required:W.mw,maxLength:(0,W.Ru)(64)}},computed:Vt(Vt({},(0,u.aH)({currentLanguage:"currentLanguage",TOTPDevices:"TOTPDevices",WebAuthnDevices:"WebAuthnDevices",emailVerified:function(t){return t.email.isVerified},userHasWebauthnEnabled:"userHasWebauthnEnabled"})),{},{saveCodeButtons:function(){return["print","copy","download"]},wizardSteps:function(){return zt},deviceTypes:function(){return w.Xr},regenerationWizardSteps:function(){return Kt},secretFormatted:function(){return this.qrSecret.match(/.{1,4}/g).join(" ")},stepsIndicatorString:function(){var t=this.translations.stepsIndicator;return(0,h.FV)(t,{cur_step:this.currentStep,all_steps:Object.keys(zt).length-2})},scanQRCodeDescription:function(){var t=this.translations.scanQRCodeDescription;return(0,h.FV)(t,{link_start:'<a href="https://support.google.com/accounts/answer/1066447" target="_blank">',link_end:"</a>"})},typeQRCodeHeader:function(){var t=this.translations.typeQRCodeHeader;return(0,h.FV)(t,{n:h.B_})},totpCodeLength:function(){return h.B_},recoveryCodesAsText:function(){return this.recoveryCodes.join("\n")}}),methods:Vt(Vt({},(0,u.i0)(["showSudoModal"])),{},{formatTimestamp:function(t,e){return Nt(this.currentLanguage,t,e)},isMobile:function(){return(0,h.Fr)()},resetErrors:function(){this.$v.$reset(),this.otpCodeErrorFromBackend=null,this.deviceNameErrorFromBackend=null},createOTPDeviceData:function(t){return t===w.Xr.TOTP?{code:this.otpCode}:t===w.Xr.WEBAUTHN?{token:this.webAuthnToken,device_name:this.deviceName}:void 0},resetSetup:function(){this.resetErrors(),this.$store.commit("expireSudoMode");var t=this.showingWebAuthnManage,e=Xt();Object.assign(this,e),this.showingWebAuthnManage=this.WebAuthnDevices.length&&t},sudoModeExpired:function(){var t=Yt(new Date);return this.$store.state.sudoMode.expires<t},initiateRegenerateFlow:function(){var t=this,e=this.showRegenerateWizard;return this._maybeDisplaySudoPopup(this.sudoModeExpired,{onGranted:e})?Promise.resolve():(this.loading.static=!0,(0,_.A)({method:"POST",headers:(0,h.oS)(),url:(0,w.Gv)(w.Xr.STATIC)}).then((function(e){t.recoveryCodes=e.data.backup_codes,t.currentStep=Kt.SAVE_RECOVERY_CODES})).catch((function(n){t._handleSudoModeError(n,{onGranted:e})})).catch((function(e){t._handleUnexpectedError(e,!1)})).then((function(){t.loading.static=!1})))},showRegenerateWizard:function(){var t=this.showRegenerateWizard;if(this._maybeDisplaySudoPopup(this.sudoModeExpired,{onGranted:t}))return Promise.resolve();this.currentStep=Kt.INTRO,this.showingRegenerateWizard=!0},showWizard:function(){var t=this.showWizard;if(this._maybeDisplaySudoPopup(this.sudoModeExpired,{onGranted:t}))return Promise.resolve();this.currentStep=zt.TWO_FACTOR_INTRO,this.showingWizard=!0},initiateOTPFlow:function(){var t=this,e=this.showWizard;return this._maybeDisplaySudoPopup((function(){return t.sudoModeExpired()||t.$store.state.sudoMode.expires+150<Yt(new Date)}),{onGranted:e})?Promise.resolve():(this.loading.totp=!0,C(w.Xr.TOTP).then((function(e){t.qrSecret=e.data.qr_secret;var n=e.data.qr_value;Rt.toString(n,{margin:1,type:"svg"}).then((function(e){t.qrCodeSvgImage=e})),t.currentStep=zt.SCAN_QR_CODE})).catch((function(n){t._handleSudoModeError(n,{onGranted:e})})).catch((function(e){t._handleUnexpectedError(e,!0)})).then((function(){t.loading.totp=!1})))},saveWebAuthnDevice:function(){this.editedDeviceID?this.editWebAuthnDeviceName():this.pairWebAuthnDevice()},pairWebAuthnDevice:function(){var t=this;if(this.$v.deviceName.$touch(),this.$v.deviceName.$invalid)return!1;var e=this.pairWebAuthnDevice;return this._maybeDisplaySudoPopup(this.sudoModeExpired,{onGranted:e})?Promise.resolve():(this.loading.webauthn=!0,C(w.Xr.WEBAUTHN).then((function(e){console.log("init",e),window.webAuthnJSON.create((0,qt.PG)({publicKey:e.data.registration_options})).then((function(e){t.webAuthnToken=JSON.stringify(e.toJSON()),t.createOTPDevice(w.Xr.WEBAUTHN)})).catch((function(e){console.log(e),t._handleUnexpectedError(e,!1)}))})).catch((function(n){t._handleSudoModeError(n,{onGranted:e})})).catch((function(e){t._handleUnexpectedError(e,!1)})).then((function(){t.loading.webauthn=!1})))},showQRCodeInput:function(){var t=this.showWizard;if(this._maybeDisplaySudoPopup(this.sudoModeExpired,{onGranted:t}))return Promise.resolve();this.currentStep=zt.TYPE_QR_CODE},createOTPDevice:function(t){var e,n,r=this,o=this.showWizard;return this._maybeDisplaySudoPopup(this.sudoModeExpired,{onGranted:o})?Promise.resolve():(this.loading[t]=!0,(e=t,n=this.createOTPDeviceData(t),(0,_.A)({method:"POST",headers:(0,h.oS)(),url:(0,w.Gv)(e),data:n})).then((function(e){r.recoveryCodes=e.data.backup_codes,r.device=e.data.device,0===r.recoveryCodes.length?r.enableOTPDevice(t,r.device.id):t==w.Xr.TOTP?r.currentStep=zt.SAVE_RECOVERY_CODES:t==w.Xr.WEBAUTHN&&(r.showingSaveRecoveryCodes=!0)})).catch((function(t){console.warn("Sudo mode error:",t),r._handleSudoModeError(t,{onGranted:o})})).catch((function(t){console.warn("Other error:",t);var e=tt(t.response);e.code?r.otpCodeErrorFromBackend=e.code:e.device_name?r.deviceNameErrorFromBackend=e.device_name:r._handleUnexpectedError(t,!1)})).then((function(){r.loading[t]=!1})))},goBackToInitiateOTPFlow:function(){var t=this;return this.resetErrors(),this.backButtonClicked=!0,this.initiateOTPFlow().then((function(){t.backButtonClicked=!1}))},removeOldDevice:function(){var t=this,e=this.showRegenerateWizard;return this._maybeDisplaySudoPopup(this.sudoModeExpired,{onGranted:e})?Promise.resolve():(this.loading.static=!0,(0,_.A)({method:"PUT",headers:(0,h.oS)(),url:(0,w.Gv)(w.Xr.STATIC)}).then((function(){t.showToast("msg-success",t.translations.successfullyRegenerated,"green-lock"),t.$store.commit("hideOutOfBackupCodesBanner"),t.resetSetup()})).catch((function(n){t._handleSudoModeError(n,{onGranted:e})})).catch((function(e){t._handleUnexpectedError(e,!0)})).then((function(){t.loading.static=!1})))},enableOTPDevice:function(t,e){var n=this,r=this.showWizard;return this._maybeDisplaySudoPopup(this.sudoModeExpired,{onGranted:r})?Promise.resolve():(this.loading[t]=!0,function(t,e){return(0,_.A)({method:"POST",headers:(0,h.oS)(),url:(0,w.Tc)(t),data:{device_id:e}})}(t,e).then((function(){t==w.Xr.TOTP?n.$store.commit("addTOTPDevice",n.device):t==w.Xr.WEBAUTHN&&n.$store.commit("addWebAuthnDevice",n.device),n.showToast("msg-success",n.translations.successfullyEnabled,"green-lock"),n.resetSetup()})).catch((function(t){n._handleSudoModeError(t,{onGranted:r})})).catch((function(t){n._handleUnexpectedError(t,!0)})).then((function(){n.loading[t]=!1})))},deleteOTPDevice:function(t,e){var n=this,r=function(){n.deleteOTPDevice(t,e)};if(this._maybeDisplaySudoPopup(this.sudoModeExpired,{onGranted:r}))return Promise.resolve();var o=function(){t===w.Xr.TOTP?n.$store.commit("deleteTOTPDevice",e):t===w.Xr.WEBAUTHN&&n.$store.commit("deleteWebAuthnDevice",e),n.resetSetup(),n.showToast("msg-success",n.translations.successfullyDisabled,"green-lock")};return this.loading[t]=!0,function(t,e){return(0,_.A)({method:"DELETE",headers:(0,h.oS)(),url:(0,w.Gv)(t),data:{device_id:e}})}(t,e).then((function(){o()})).catch((function(t){404!==t.response.status?n._handleSudoModeError(t,{onGranted:r}):o()})).catch((function(t){n._handleUnexpectedError(t,!1)})).then((function(){n.loading[t]=!1}))},onSaveCodeClick:function(t,e){var n=this;switch(t){case"print":It()({printable:this.recoveryCodesContainerID,type:"html",style:"#".concat(this.recoveryCodesContainerID," {display: flex; flex-direction: column;};")});break;case"copy":var r="#"+t+e,o=new(Mt())(r,{text:function(){return n.recoveryCodesAsText}});o.on("success",(function(){n.showToast("msg-success",n.translations.successfullyCopiedToClipboard,"green-copy"),o.destroy()}));break;case"download":this._downloadFile()}this.saveRecoveryCodeClicked=!0},_downloadFile:function(){var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(this.recoveryCodesAsText)),t.setAttribute("download","backup_codes"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)},_maybeDisplaySudoPopup:function(t,e){var n=e.onGranted,r=e.onClosed;return!!t()&&(this.resetSetup(),this.showSudoModal(),this.$root.$emit("register-sudo-callbacks",{onGranted:n,onClosed:r}),!0)},_handleUnexpectedError:function(t,e){e&&this.resetSetup();try{var n=tt(t.response);n.device_id?this.showToast("msg-error",n.device_id):this.showToast("msg-error",n.general)}catch(t){this.showToast("msg-error",this.translations.generalError)}},_handleSudoModeError:function(t,e){var n=e.onGranted,r=e.onClosed;if(403===t.response.status)return this.resetSetup(),this.showSudoModal(),void this.$root.$emit("register-sudo-callbacks",{onGranted:n,onClosed:r});throw t},addSecurityKey:function(){var t=this.addSecurityKey;if(this._maybeDisplaySudoPopup(this.sudoModeExpired,{onGranted:t}))return Promise.resolve();this.showingWebAuthnManage=!0,this.showingAddSecurityKey=!0},hideAddSecurityKey:function(){this.resetSetup()},hideWebAuthnManage:function(){this.showingWebAuthnManage=!1,this.resetSetup()},hideSaveRecoveryCodes:function(){this.showingSaveRecoveryCodes=!1,this.resetSetup(),this.showingAddSecurityKey=!1},showWebAuthnManageModal:function(){this.showingWebAuthnManage=!0},showEditWebAuthnDeviceName:function(t){var e=this;if(this._maybeDisplaySudoPopup(this.sudoModeExpired,{onGranted:function(){return e.showEditWebAuthnDeviceName(t)}}))return Promise.resolve();this.resetErrors(),this.deviceName=t.name,this.editedDeviceID=t.id,this.showingEditWebAuthnDeviceName=!0},editWebAuthnDeviceName:function(){var t=this;if(this.$v.deviceName.$touch(),this.$v.deviceName.$invalid)return!1;var e,n,r,o=this.editWebAuthnDeviceName;return this._maybeDisplaySudoPopup(this.sudoModeExpired,{onGranted:o})?Promise.resolve():(this.loading.webauthn=!0,(e=w.Xr.WEBAUTHN,n=this.editedDeviceID,r=this.deviceName,(0,_.A)({method:"PUT",headers:(0,h.oS)(),url:(0,w.Gv)(e),data:{device_id:n,device_name:r}})).then((function(e){t.$store.commit("updateWebAuthnDevice",e.data),t.resetSetup()})).catch((function(e){t._handleSudoModeError(e,{onGranted:o})})).catch((function(e){var n=tt(e.response);n.device_name?t.deviceNameErrorFromBackend=n.device_name:n.device_id?t.otpCodeErrorFromBackend=n.device_id:t._handleUnexpectedError(e,!1)})).then((function(){t.loading.webauthn=!1})))}})},Zt={name:"LoginOptionsForm",components:{EmailField:At,PasswordField:Ft,TwoFactorAuthField:(0,m.A)(Jt,Dt,[function(){var t=this._self._c;return t("div",{staticClass:"header"},[t("div",{staticClass:"key-icon"})])}],!1,null,null,null).exports},props:{translations:{type:Object,required:!0}}},te=(0,m.A)(Zt,St,[],!1,null,null,null).exports;var ee=function(){var t=this,e=t._self._c;return e("div",{staticClass:"profileSection"},[e("h2",[t._v(t._s(t.translations.header))]),t._v(" "),t.emailVerified?t._e():e("p",{staticClass:"msg-info"},[t._v("\n    "+t._s(t.translations.emailVerificationNeeded)+"\n  ")]),t._v(" "),t._l(t.SOCIAL_NETWORKS,(function(n){return e("social-network-field",{key:n,attrs:{type:n,connected:t.isConnected(n),"allow-connection":t.emailVerified,"allow-disconnection":t.hasPassword,"with-sudo":!0,text:t.dataForProvider(n).fullname||t.dataForProvider(n).username,"image-url":t.dataForProvider(n).pictureUrl,translations:t.translations}})}))],2)};ee._withStripped=!0;var ne=function(){var t=this,e=t._self._c;return e("section",[e("h3",[t._v(t._s(t._capitalize(t.type)))]),t._v(" "),e("div",{staticClass:"fieldPair"},[t.connected?e("div",{staticClass:"left"},[e("div",{class:["connectedSocialNetworkUser",t.type]},[e("img",{attrs:{src:t.imageSrc,alt:"user image"}}),t._v("\n        "+t._s(t.text)+"\n      ")]),t._v(" "),t.allowDisconnection?t._e():e("p",{staticClass:"left msg-info"},[t._v("\n        "+t._s(t.translations.passwordNeeded)+"\n      ")])]):e("div",{staticClass:"left"},[e("p",{domProps:{innerHTML:t._s(t.withProviderString(t.translations.hint))}})]),t._v(" "),e("div",{staticClass:"right"},[e("connect-disconnect-button",{attrs:{type:t.type,connected:t.connected,enabled:t.connected?t.allowDisconnection:t.allowConnection,"connected-text":t.translations.button.disconnect,"disconnected-text":t.withProviderString(t.translations.connect)},on:{connect:t.submit}})],1)])])};ne._withStripped=!0;var re=function(){var t=this,e=t._self._c;return t.connected?e("form",{ref:"form",attrs:{id:"disconnect-".concat(t.type,"-button"),method:"post",action:"/account/social/disconnect"}},[e("input",{attrs:{type:"hidden",name:"csrfmiddlewaretoken"},domProps:{value:t.csrftoken}}),t._v(" "),e("input",{attrs:{type:"hidden",name:"provider"},domProps:{value:t.type}}),t._v(" "),e("div",{staticClass:"secondaryButton",attrs:{disabled:!t.enabled},on:{click:t.submitForm}},[t._v("\n    "+t._s(t.connectedText)+"\n  ")])]):e("form",{ref:"form",attrs:{id:"connect-".concat(t.type,"-button"),method:"post",action:"/account/social/connect"}},[e("input",{attrs:{type:"hidden",name:"csrfmiddlewaretoken"},domProps:{value:t.csrftoken}}),t._v(" "),e("input",{attrs:{type:"hidden",name:"provider"},domProps:{value:t.type}}),t._v(" "),e("div",{class:["socialButton",t.type],attrs:{disabled:!t.enabled},on:{click:function(e){return t.$emit("connect")}}},[t._v("\n    "+t._s(t.disconnectedText)+"\n  ")])])};re._withStripped=!0;const oe={mixins:[d.i_],props:{type:{type:String,required:!0},connectedText:{type:String,required:!0},disconnectedText:{type:String,required:!0},connected:{type:Boolean,default:!1},enabled:{type:Boolean,required:!0}},computed:{csrftoken:function(){return this.getCSRFToken()}},methods:{submitForm:function(){this.enabled&&this.connected&&this.$refs.form.submit()}}},ie=(0,m.A)(oe,re,[],!1,null,null,null).exports,se=n.p+"img/ee655dd65bce8ff796f0.svg",ae={components:{ConnectDisconnectButton:ie},extends:Y,mixins:[d.ch],props:{type:{type:String,required:!0},connected:{type:Boolean,default:!1},text:{type:String,default:""},imageUrl:{type:String,default:""},allowConnection:{type:Boolean,default:!0},allowDisconnection:{type:Boolean,default:!0},translations:{type:Object,required:!0}},computed:{imageSrc:function(){return this.imageUrl||se}},methods:{_capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},withProviderString:function(t){return(0,h.FV)(t,{provider:this._capitalize(this.$escape(this.type))})},onSuccess:function(t){window.location.href=t.data.location},onError:function(t){400===t.status&&this.showToast("msg-error",t.data.errors[0].detail)},makeRequestToAPI:function(){if(!this.connected)return t=this.type,(0,_.A)({method:"POST",headers:(0,h.oS)(),data:{provider:t},url:w.j1});var t}}};function ce(t){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ce(t)}function le(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ue(t,e,n){return(e=function(t){var e=function(t){if("object"!=ce(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ce(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const de={name:"SocialForm",components:{SocialNetworkField:(0,m.A)(ae,ne,[],!1,null,null,null).exports},props:{translations:{type:Object,required:!0}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?le(Object(n),!0).forEach((function(e){ue(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},(0,u.aH)({accounts:"socialAccounts",hasPassword:"hasPassword",emailVerified:function(t){return t.email.isVerified}})),created:function(){this.SOCIAL_NETWORKS=["facebook","google","apple"]},methods:{isConnected:function(t){return t in this.accounts},dataForProvider:function(t){return this.accounts[t]||{}}}},pe=(0,m.A)(de,ee,[],!1,null,null,null).exports;var fe=function(){var t=this,e=t._self._c;return t.currentStep===t.sudoSteps.PASSWORD?e("modal",{key:t.currentStep,attrs:{id:"sudo-modal"}},[t.$store.state.hasPassword?[e("div",{staticClass:"modalHeader",attrs:{slot:"header"},slot:"header"},[e("h3",[t._v(t._s(t.translations.passwordHeader))]),t._v(" "),e("div",{staticClass:"modalClose",on:{click:function(e){return t.$emit("close")}}})]),t._v(" "),e("div",{staticClass:"modalMain",attrs:{slot:"main"},slot:"main"},[e("div",{staticClass:"form"},[e("text-input",{attrs:{name:"email",inputmode:"email",value:t.$store.state.email.address,translations:t.translations.emailInput,"with-label":!0,disabled:!0,"set-focus":!t.isMobile(),tabindex:11}}),t._v(" "),e("password-input",{attrs:{"data-tid":"sudo-modal-password-input",autocomplete:"current-password",active:!t.savingForm,validator:{error:t.$v.password.$error||t.errorFromBackend.password,pending:t.$v.password.$pending||t.savingForm},"error-msg":t.errorFromBackend.password,"error-type":{missing:!t.$v.password.required,backendError:t.errorFromBackend.password},translations:t.translations.passwordInput,"with-label":!0,"helper-text":!1,"set-focus":!t.isMobile(),tabindex:12},on:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.passwordStepEnd.apply(null,arguments)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.$emit("close")}],input:function(){t.errorFromBackend.password=null}},model:{value:t.$v.password.$model,callback:function(e){t.$set(t.$v.password,"$model",e)},expression:"$v.password.$model"}})],1),t._v(" "),e("div",{staticClass:"buttonContainer"},[e("loading-button",{staticClass:"primaryButton",attrs:{active:!t.savingForm,label:t.translations.button.confirm,tabindex:13,"data-tid":"sudo-modal-confirm-button"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.passwordStepEnd.apply(null,arguments)},click:t.passwordStepEnd}})],1)])]:[e("div",{staticClass:"modalMain",attrs:{slot:"main"},slot:"main"},[e("div",{staticClass:"modalHeader",attrs:{slot:"header"},slot:"header"},[e("h3",[t._v(t._s(t.translations.nopassHeader))]),t._v(" "),e("div",{staticClass:"modalClose",on:{click:function(e){return t.$emit("close")}}})]),t._v(" "),e("p",{staticClass:"text"},[t._v("\n        "+t._s(t.translations.nopassDescription)+"\n      ")]),t._v(" "),e("div",{staticClass:"buttonContainer"},[e("loading-button",{staticClass:"primaryButton",attrs:{active:!t.savingForm,label:t.translations.button.continue},on:{click:t.logout}})],1)])]],2):t.currentStep===t.sudoSteps.TFA?e("modal",{key:t.currentStep,attrs:{id:"sudo-modal"}},[e("div",{staticClass:"modalHeader",attrs:{slot:"header"},slot:"header"},[e("div",{staticClass:"titles"},[e("h3",{staticClass:"title"},[t._v("\n        "+t._s(t.title)+"\n      ")]),t._v(" "),e("p",{staticClass:"subtitle"},[t._v("\n        "+t._s(t.subtitle)+"\n      ")])]),t._v(" "),e("div",{staticClass:"modalClose",on:{click:function(e){return t.$emit("close")}}})]),t._v(" "),e("div",{staticClass:"modalMain form",attrs:{slot:"main"},slot:"main"},[t.currentDeviceType===t.deviceTypes.WEBAUTHN?e("div",[e("div",{staticClass:"buttonContainer"},[e("loading-button",{staticClass:"primaryButton",attrs:{active:!t.savingForm,label:t.label,type:"submit","data-tid":"webauthn-submit-btn"},on:{click:t.useSecurityKey}}),t._v(" "),t.errorFromBackend.device?e("p",{staticClass:"webauthn-error"},[t._v("\n          "+t._s(t.translations.secondFactorVerification.generalError)+"\n        ")]):t._e()],1)]):e("div",[e("otp-code",{ref:"codeRef",attrs:{active:!t.savingForm,"code-type":t.currentDeviceType,"num-inputs":t.codeLength,validator:{error:t.$v.deviceCode.$error||!!t.errorFromBackend.device},"error-msg":t.errorFromBackend.device,"error-type":{missing:!t.$v.deviceCode.required,backendError:Boolean(t.errorFromBackend.device)},translations:t.translations.secondFactorVerification.otpInput,tabindex:11},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.deviceCodeStepEnd.apply(null,arguments)},"~inputFinished":function(e){return t.deviceCodeStepEnd.apply(null,arguments)},input:function(){t.errorFromBackend.device=null,t.$v.deviceCode.$touch()}},model:{value:t.$v.deviceCode.$model,callback:function(e){t.$set(t.$v.deviceCode,"$model",e)},expression:"$v.deviceCode.$model"}}),t._v(" "),e("div",{staticClass:"buttonContainer"},[e("button",{staticClass:"primaryButton",attrs:{type:"submit",tabindex:"20"},on:{click:function(e){return e.preventDefault(),t.deviceCodeStepEnd.apply(null,arguments)}}},[t._v("\n          "+t._s(t.translations.secondFactorVerification.button.confirm)+"\n        ")])])],1),t._v(" "),e("div",{staticClass:"alt-otp"},[t.currentDeviceType!==t.deviceTypes.WEBAUTHN&&t.hasWebAuthn?e("div",[t._v("\n        "+t._s(t.splitTrans.havingTroubleUseA)),e("a",{attrs:{"data-tid":"webauthn-code-btn"},on:{click:function(e){return e.preventDefault(),t.changeType(t.deviceTypes.WEBAUTHN)}}},[t._v(t._s(t.splitTrans.havingTroubleKey))])]):t._e(),t._v(" "),t.currentDeviceType===t.deviceTypes.WEBAUTHN&&t.hasTOTP?e("div",[t._v("\n        "+t._s(t.splitTrans.havingTroubleUseThe)),e("a",{attrs:{"data-tid":"totp-code-btn"},on:{click:function(e){return e.preventDefault(),t.changeType(t.deviceTypes.TOTP)}}},[t._v(t._s(t.splitTrans.havingTroubleApp))])]):t._e(),t._v(" "),t.currentDeviceType!==t.deviceTypes.STATIC?e("div",[t._v("\n        "+t._s(t.splitTrans.orUseA)),e("a",{attrs:{"data-tid":"backup-code-btn"},on:{click:function(e){return e.preventDefault(),t.changeType(t.deviceTypes.STATIC)}}},[t._v(t._s(t.splitTrans.orUseBackupCode))])]):t._e(),t._v(" "),t.currentDeviceType===t.deviceTypes.STATIC&&t.hasTOTP?e("div",[t._v("\n        "+t._s(t.splitTrans.orUseThe)),e("a",{attrs:{"data-tid":"totp-code-btn"},on:{click:function(e){return e.preventDefault(),t.changeType(t.deviceTypes.TOTP)}}},[t._v(t._s(t.splitTrans.orUseTheApp))])]):t._e()])])]):t._e()};fe._withStripped=!0;var he=n(50825),ve=n(11446);function me(t){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},me(t)}function ye(){ye=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof y?e:y,s=Object.create(i.prototype),a=new x(r||[]);return o(s,"_invoke",{value:P(t,n,a)}),s}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var p="suspendedStart",f="suspendedYield",h="executing",v="completed",m={};function y(){}function g(){}function b(){}var _={};l(_,s,(function(){return this}));var w=Object.getPrototypeOf,S=w&&w(w(j([])));S&&S!==n&&r.call(S,s)&&(_=S);var C=b.prototype=y.prototype=Object.create(_);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function n(o,i,s,a){var c=d(t[o],t,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==me(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,s,a)}),(function(t){n("throw",t,s,a)})):e.resolve(u).then((function(t){l.value=t,s(l)}),(function(t){return n("throw",t,s,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function P(e,n,r){var o=p;return function(i,s){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===i)throw s;return{value:t,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=T(a,r);if(c){if(c===m)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var l=d(e,n,r);if("normal"===l.type){if(o=r.done?v:f,l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=v,r.method="throw",r.arg=l.arg)}}}function T(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var i=d(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var s=i.arg;return s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function j(e){if(e||""===e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(me(e)+" is not iterable")}return g.prototype=b,o(C,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,c,"GeneratorFunction")),t.prototype=Object.create(C),t},e.awrap=function(t){return{__await:t}},k(O.prototype),l(O.prototype,a,(function(){return this})),e.AsyncIterator=O,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var s=new O(u(t,n,r,o),i);return e.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},k(C),l(C,c,"Generator"),l(C,s,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=j,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return a.type="throw",a.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),l=r.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;A(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:j(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}function ge(t,e,n,r,o,i,s){try{var a=t[i](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,o)}function be(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _e(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?be(Object(n),!0).forEach((function(e){we(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function we(t,e,n){return(e=function(t){var e=function(t){if("object"!=me(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=me(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==me(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Se={PASSWORD:0,TFA:1};const Ce={components:{Modal:y,LoadingButton:he.A,PasswordInput:jt.A,TextInput:H.A,OtpCode:Ut.A},mixins:[q.Hy],props:{translations:{type:Object,required:!0},logoutUrl:{type:String,required:!0}},data:function(){return{password:"",errorFromBackend:{},savingForm:!1,currentStep:Se.PASSWORD,deviceCode:null,currentDeviceType:void 0}},validations:{password:{required:W.mw},deviceCode:{required:W.mw}},computed:_e(_e({},(0,u.aH)(["TOTPDevices","WebAuthnDevices"])),{},{sudoSteps:function(){return Se},deviceTypes:function(){return w.Xr},hasWebAuthn:function(){return 0!==this.WebAuthnDevices.length},hasTOTP:function(){return 0!==this.TOTPDevices.length},t:function(){return this.translations.secondFactorVerification},otpTrans:function(){switch(this.currentDeviceType){case w.Xr.TOTP:return{title:this.t.totpHeader,subtitle:this.t.totpSubheader,label:this.t.totpLabel,codeLength:6};case w.Xr.STATIC:return{title:this.t.recoveryHeader,subtitle:this.t.recoverySubheaderAlt,label:this.t.recoveryLabel,codeLength:8};case w.Xr.WEBAUTHN:return{title:this.t.webAuthnHeader,subtitle:this.t.webAuthnSubheaderAlt,label:this.t.webAuthnLabel};default:return console.warn("Unsupported device type"),{}}},splitTrans:function(){return{havingTroubleUseThe:this.t.otpHavingTroubleUseTheAuthenticatorApp.split("{split}")[0],havingTroubleApp:this.t.otpHavingTroubleUseTheAuthenticatorApp.split("{split}")[1],havingTroubleUseA:this.t.otpHavingTroubleUseASecurityKey.split("{split}")[0],havingTroubleKey:this.t.otpHavingTroubleUseASecurityKey.split("{split}")[1],orUseA:this.t.otpOrUseABackupCode.split("{split}")[0],orUseBackupCode:this.t.otpOrUseABackupCode.split("{split}")[1],orUseThe:this.t.otpOrUseTheAuthenticatorApp.split("{split}")[0],orUseTheApp:this.t.otpOrUseTheAuthenticatorApp.split("{split}")[1]}},title:function(){return this.otpTrans.title},subtitle:function(){return this.otpTrans.subtitle},label:function(){return this.otpTrans.label},codeLength:function(){return this.otpTrans.codeLength}}),methods:_e(_e({},(0,u.PY)(["setSudoModeExpiryTimestamp"])),{},{isMobile:function(){return(0,h.Fr)()},logout:function(){location.href=this.logoutUrl},passwordStepEnd:function(){this.$v.password.$touch(),this.$v.password.$invalid||(0!==this.WebAuthnDevices.length?(this.currentDeviceType=w.Xr.WEBAUTHN,this.currentStep=Se.TFA):0!==this.TOTPDevices.length?(this.currentDeviceType=w.Xr.TOTP,this.currentStep=Se.TFA):this.makeRequestToAPI())},deviceCodeStepEnd:function(){this.$v.deviceCode.$touch(),this.$v.deviceCode.$invalid||this.makeRequestToAPI()},makeRequestToAPI:function(){var t,e,n,r,o=this;this.savingForm=!0,(t=this.password,e=this.deviceCode,n=this.currentDeviceType,r={password:t},e&&(r.device_code=e,r.code_type=n),(0,_.A)({method:"POST",headers:(0,h.oS)(),data:r,url:w.Iy})).then((function(t){var e=t.data.expires;o.setSudoModeExpiryTimestamp(e),o.$emit("sudo-granted")})).catch((function(t){var e=tt(t.response);o.errorFromBackend={password:e.password||e.general,device:e.code_type||e.device_code},o.$v.$reset(),o.errorFromBackend.password&&(o.deviceCode=null,o.currentStep=Se.PASSWORD)})).then((function(){o.savingForm=!1}))},changeType:function(t){this.$v.deviceCode.$reset(),this.$refs.codeRef&&this.$refs.codeRef.reset(),this.errorFromBackend.device=null,this.currentDeviceType=t},useSecurityKey:function(){var t,e=this;return(t=ye().mark((function t(){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.errorFromBackend.device=void 0,e.savingForm=!0,t.prev=2,t.next=5,(0,ve.A)();case 5:e.deviceCode=t.sent,e.makeRequestToAPI(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),e.errorFromBackend.device=t.t0;case 12:return t.prev=12,e.savingForm=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[2,9,12,15]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function s(t){ge(i,r,o,s,a,"next",t)}function a(t){ge(i,r,o,s,a,"throw",t)}s(void 0)}))})()}})},ke=(0,m.A)(Ce,fe,[],!1,null,"5beecc6c",null).exports;var Oe=function(){var t=this,e=t._self._c;return e("div",{class:{profileSection:!0,highlight:t.isHighlighted},attrs:{id:"session-section"}},[e("h2",[t._v(t._s(t.translations.header))]),t._v(" "),e("div",{staticClass:"fieldPair"},[e("p",{staticClass:"left"},[t._v("\n      "+t._s(t.translations.subheader)+"\n    ")]),t._v(" "),e("div",{staticClass:"right"},[t.showingList?e("div",{staticClass:"right secondaryButton",on:{click:t.hideList}},[t._v("\n        "+t._s(t.translations.button.hide)+"\n      ")]):e("loader-button",{staticClass:"right secondaryButton",attrs:{active:!t.fetching,label:t.translations.button.show},on:{click:t.showList}})],1)]),t._v(" "),t.showingList?t._l(t.sessions,(function(n){return e("session",{key:n.id,attrs:{id:n.id,city:n.last_city,"client-id":n.client_id,"client-name":n.client_name,country:n.last_country,current:n.is_current||!1,ip:n.last_ip,"last-used":n.last_used,"logo-src":t.logos(n.client_id),translations:t.translations},on:{delete:t.deleteSession}})})):t._e()],2)};Oe._withStripped=!0;var Pe=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"sessionCard"},[e("div",{staticClass:"logo",attrs:{id:t.clientId}},[e("img",{attrs:{src:t.logoSrc,alt:t.clientName}})]),t._v(" "),e("div",{staticClass:"info"},[t.country||t.city?e("span",{staticClass:"location"},[t._v("\n        "+t._s(t.country?t.city?t.city+", "+t.country:t.country:t.city)+"\n      ")]):t._e(),t._v(" "),t.ip?e("span",{staticClass:"ip"},[t._v("\n        "+t._s("(".concat(t.ip,")"))+"\n      ")]):t._e(),t._v(" "),t.lastUsed?e("p",{staticClass:"datetime"},[t._v("\n        "+t._s("".concat(t.formatTimestamp(t.lastUsed)))+"\n      ")]):t._e()]),t._v(" "),e("div",{staticClass:"active"},[t.current?e("p",{staticClass:"active"},[t._v("\n        "+t._s(t.translations.current)+"\n      ")]):e("loader-button",{staticClass:"primaryButton",attrs:{active:!t.deleting,label:t.translations.button.delete},on:{click:t.deleteSession}})],1)])])};function Te(t){return Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Te(t)}function Ee(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ae(t,e,n){return(e=function(t){var e=function(t){if("object"!=Te(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Te(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Pe._withStripped=!0;const xe={components:{LoaderButton:Z},mixins:[d.ch],props:{id:{type:String,required:!0},clientId:{type:String,required:!0},clientName:{type:String,required:!0},logoSrc:{type:String,required:!0},city:{type:String,default:""},country:{type:String,default:""},ip:{type:String,default:""},lastUsed:{type:Number,required:!0},current:Boolean,translations:{type:Object,required:!0}},data:function(){return{deleting:!1}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ee(Object(n),!0).forEach((function(e){Ae(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},(0,u.aH)({currentLanguage:"currentLanguage"})),methods:{formatTimestamp:function(t){return Nt(this.currentLanguage,t)},deleteSession:function(){var t,e,n=this;this.deleting=!0,(t=this.clientId,e=this.id,(0,_.A)({method:"DELETE",headers:(0,h.oS)(),url:(0,w.rs)(t,e)})).then((function(){n._delete()})).catch((function(t){404!==t.response.status?n.showToast("msg-error",n.translations.unexpectedError):n._delete()})).then((function(){n.deleting=!1}))},_delete:function(){this.$emit("delete",this.id),this.showToast("msg-success",this.translations.sessionDeleted)}}};function je(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const Be={name:"ActiveSessionsField",components:{Session:(0,m.A)(xe,Pe,[],!1,null,null,null).exports,LoaderButton:Z},mixins:[d.ch,d.vU],props:{translations:{type:Object,required:!0}},data:function(){return{lastUpdated:Date.now(),sessions:[],showingList:!1,fetching:!1}},methods:{logos:function(t){var e=w.$t[t];return e?e.logoSessionList:""},showList:function(){var t=this;this.fetching=!0,(0,_.A)({method:"GET",headers:{Accept:"application/json"},url:w.YC}).then((function(e){var n;t.sessions=(n=e.data,function(t){if(Array.isArray(t))return je(t)}(n)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||function(t,e){if(t){if("string"==typeof t)return je(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?je(t,e):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).sort((function(t,e){if(t.id!==e.id){if(t.is_current)return-1;if(e.is_current)return 1}return e.last_used-t.last_used})),t.showingList=!0,(0,h.Fr)()&&t.$scrollTo("#session-section",100)})).catch((function(){t.showToast("msg-error",t.translations.unexpectedError)})).then((function(){t.fetching=!1}))},hideList:function(){this.showingList=!1,(0,h.Fr)()&&this.$scrollTo("#session-section",100)},deleteSession:function(t){this.sessions=this.sessions.filter((function(e){return e.id!==t}))}}},Fe=(0,m.A)(Be,Oe,[],!1,null,null,null).exports;var De=function(){var t=this,e=t._self._c;return e("div",{class:{profileSection:!0,highlight:t.isHighlighted},attrs:{id:"marketing-consent"}},[e("h2",[t._v(t._s(t.translations.header))]),t._v(" "),t.showReminder?[e("div",{staticClass:"fieldPair"},[e("p",{staticClass:"left msg-info"},[t._v("\n        "+t._s(t.translations.confirmationLink)+"\n      ")]),t._v(" "),e("loader-button",{staticClass:"right secondaryButton",attrs:{active:!t.sendingMarketingConsentConfirmationEmail,label:t.translations.button.resend},on:{click:t.resendMarketingConsentConfirmationEmail}})],1)]:t._e(),t._v(" "),e("product",{key:t.marketingConsentProductAllKey+t.marketingConsentProductAll.marketing_consent+t.marketingConsentProductAll.awaiting_confirmation,attrs:{"product-id":t.marketingConsentProductAllKey,"product-name":t.translations.subheader,"marketing-consent":t.marketingConsentProductAll.marketing_consent,"awaiting-confirmation":t.marketingConsentProductAll.awaiting_confirmation,translations:t.translations},on:{toggle:t.onToggle}}),t._v(" "),t.showProducts?t._l(t.marketingConsentWithoutProductAll,(function(n,r){return e("product",{key:r+n.marketing_consent+n.awaiting_confirmation,attrs:{"product-id":r,"product-name":n.name,"marketing-consent":n.marketing_consent,"awaiting-confirmation":n.awaiting_confirmation,translations:t.translations},on:{toggle:t.onToggle}})})):t._e(),t._v(" "),t.hasChanged?e("div",{staticClass:"fieldPair"},[e("p",{staticClass:"left"}),t._v(" "),e("div",{staticClass:"right"},[e("div",{staticClass:"right secondaryButton",on:{click:t.saveChanges}},[t._v("\n        "+t._s(t.translations.button.save)+"\n      ")])])]):t._e()],2)};De._withStripped=!0;var $e=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"productCard"},[e("label",{on:{click:t.onToggle}},[t._v(t._s(t._f("capitalize")(t.productName)))]),t._v(" "),e("div",{staticClass:"product"},[t.showAwaitConfirmationMessage?e("span",[t._v(t._s(t.translations.awaitingConfirmation))]):t._e(),t._v(" "),e("checkbox",{class:{awaitingConfirmation:t.awaitingConfirmation},attrs:{checked:t.checked,name:t.productId},on:{toggle:t.onToggle}})],1)])])};$e._withStripped=!0;var Me=function(){var t=this,e=t._self._c;return e("div",{staticClass:"checkbox",class:{checked:t.checked,sending:t.sending},on:{click:function(e){return t.$emit("toggle",!t.checked)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.$emit("toggle",!t.checked)}}},[e("div",{staticClass:"toggle"})])};Me._withStripped=!0;const Le={name:"Checkbox",props:{name:{type:String,required:!0},checked:{type:Boolean,default:!1},sending:{type:Boolean,default:!1}}},Ie={extends:(0,m.A)(Le,Me,[],!1,null,null,null).exports},Re=(0,m.A)(Ie,void 0,void 0,!1,null,"5b9d80d8",null).exports,Ue={components:{checkbox:Re},filters:{capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},mixins:[d.ch],props:{productId:{type:String,required:!0},productName:{type:String,required:!0},marketingConsent:{type:Boolean,required:!0},translations:{type:Object,required:!0},awaitingConfirmation:{type:Boolean,required:!0}},data:function(){return{checked:this.marketingConsent}},computed:{showAwaitConfirmationMessage:function(){return this.marketingConsent&&this.awaitingConfirmation}},methods:{onToggle:function(){this.checked=!this.checked,this.$emit("toggle",this.productId,this.checked)}}},Ne=(0,m.A)(Ue,$e,[],!1,null,null,null).exports;var qe=n(88055),We=n.n(qe);function He(t){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},He(t)}function Ve(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw o}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Ge(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ge(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ge(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function ze(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ke(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ze(Object(n),!0).forEach((function(e){Xe(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Xe(t,e,n){return(e=function(t){var e=function(t){if("object"!=He(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=He(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==He(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Ye={name:"MarketingConsent",components:{LoaderButton:Z,Product:Ne},mixins:[d.ch,d.vU],props:{translations:{type:Object,required:!0}},data:function(){return{marketingConsent:{},changedServices:[],marketingConsentProductAllKey:"all",sendingMarketingConsentConfirmationEmail:!1,cancellingMarketingConsentConfirmationEmail:!1}},computed:Ke(Ke({},(0,u.aH)({currentMarketingConsent:"marketingConsent"})),{},{hasChanged:function(){return this.changedServices.length>0},showProducts:function(){return!this.marketingConsentProductAll.marketing_consent},marketingConsentProductAll:function(){return this.currentMarketingConsent[this.marketingConsentProductAllKey]},marketingConsentWithoutProductAll:function(){var t=We()(this.$store.state.marketingConsent);return delete t[this.marketingConsentProductAllKey],t},showReminder:function(){return!this.hasChanged&&!Object.values(this.$store.state.marketingConsent).every((function(t){return!t.awaiting_confirmation}))}}),watch:{country:function(t,e){var n=this;this.doubleOptInCountries.includes(t)!==this.doubleOptInCountries.includes(e)&&(0,_.A)({method:"GET",headers:(0,h.oS)(),url:w.Eu}).then((function(t){n.changedServices=[],n.setMarketingConsent(t.data)})).catch((function(t){var e=tt(t.response);n.showToast("msg-error",e.non_field_errors||e.general)}))}},methods:Ke(Ke({},(0,u.PY)(["setMarketingConsent"])),{},{resendMarketingConsentConfirmationEmail:function(){var t=this;if(!this.hasChanged)return this.sendingMarketingConsentConfirmationEmail=!0,(0,_.A)({method:"POST",headers:(0,h.oS)(),url:w.Tg}).then((function(){t.showToast("msg-success",t.translations.emailSent)})).catch((function(e){var n=tt(e.response);t.showToast("msg-error",n.error||n.general)})).then((function(){t.sendingMarketingConsentConfirmationEmail=!1}))},updateChangedServices:function(t){var e=this.changedServices.indexOf(t);-1!==e?this.changedServices.splice(e,1):this.changedServices.push(t)},toggleAllToTrue:function(){for(var t=We()(this.$store.state.marketingConsent),e=0,n=Object.entries(this.$store.state.marketingConsent);e<n.length;e++){var r=Ve(n[e],2),o=r[0];r[1].marketing_consent||(t[o].marketing_consent=!0,this.updateChangedServices(o))}this.setMarketingConsent(t)},onToggle:function(t,e){if(t===this.marketingConsentProductAllKey&&e)this.toggleAllToTrue();else{this.updateChangedServices(t);var n=We()(this.currentMarketingConsent);n[t].marketing_consent=e,this.setMarketingConsent(n)}},saveChanges:function(){var t=this;if(this.hasChanged){for(var e=[],n=0,r=Object.entries(this.$store.state.marketingConsent);n<r.length;n++){var o=Ve(r[n],2),i=o[0],s=o[1];-1!==this.changedServices.indexOf(i)&&e.push({product:i,marketing_consent:s.marketing_consent})}(function(t){return(0,_.A)({method:"PUT",headers:(0,h.oS)(),data:t,url:w.Eu})})(e).then((function(e){t.changedServices=[],t.setMarketingConsent(e.data)})).catch((function(e){var n=tt(e.response);t.showToast("msg-error",n.non_field_errors||n.general)}))}}})},Qe=(0,m.A)(Ye,De,[],!1,null,null,null).exports;var Je=function(){var t=this,e=t._self._c;return e("div",{class:{profileSection:!0,highlight:t.isHighlighted},attrs:{id:"notification-preferences"}},[e("h2",[t._v(t._s(t.translations.header))]),t._v(" "),t._l(t.currentNotificationPreferences,(function(n,r){return e("preference",{key:r,attrs:{name:r,label:t.translations.description[r],checked:n,sending:t.sending[r]},on:{toggle:function(){return t.onToggle(r)}}})}))],2)};Je._withStripped=!0;var Ze=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"preferenceCard"},[e("label",{on:{click:t.onToggle}},[t._v(t._s(t.label))]),t._v(" "),e("checkbox",{attrs:{checked:t.checked,sending:t.sending,name:t.name},on:{toggle:t.onToggle}})],1)])};Ze._withStripped=!0;const tn={name:"Preference",components:{checkbox:Re},props:{name:{type:String,required:!0},label:{type:String,required:!0},checked:{type:Boolean,default:!1},sending:{type:Boolean,default:!1}},methods:{onToggle:function(){this.$emit("toggle")}}};function en(t){return en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},en(t)}function nn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function rn(t,e,n){return(e=function(t){var e=function(t){if("object"!=en(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=en(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==en(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const on={name:"NotificationPreferences",components:{Preference:(0,m.A)(tn,Ze,[],!1,null,null,null).exports},mixins:[d.ch,d.vU],props:{translations:{type:Object,required:!0},highlight:{type:Boolean,default:!1}},data:function(){return{sending:{}}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nn(Object(n),!0).forEach((function(e){rn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},(0,u.aH)({currentNotificationPreferences:"notificationPreferences"})),methods:{onToggle:function(t){var e=this;if(!this.sending[t]){var n,r=rn({},t,!this.$store.state.notificationPreferences[t]);this.$set(this.sending,t,!0),(n=r,(0,_.A)({method:"PUT",headers:(0,h.oS)(),data:n,url:w.JM})).then((function(){e.$store.commit("setNotificationPreference",r)})).catch((function(t){var n=tt(t.response);e.showToast("msg-error",n.non_field_errors||n.general)})).then((function(){e.$delete(e.sending,t)}))}}}},sn=(0,m.A)(on,Je,[],!1,null,null,null).exports;var an=function(){var t=this,e=t._self._c;return e("div",{staticClass:"profileSection"},[e("h2",[t._v(t._s(t.translations.header))]),t._v(" "),e("div",{staticClass:"fieldPair"},[e("p",{domProps:{innerHTML:t._s(t.hintMsg)}})])])};an._withStripped=!0;const cn={props:{translations:{type:Object,required:!0},url:{type:String,required:!0}},computed:{hintMsg:function(){var t=this.translations.description;return(0,h.FV)(t,{link_start:'<a data-tid="delete-profile-link" href="'+this.$escape(this.url)+'">',link_end:"</a>"})}}},ln=(0,m.A)(cn,an,[],!1,null,null,null).exports;var un=n(15154);function dn(t){return dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dn(t)}function pn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function fn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pn(Object(n),!0).forEach((function(e){hn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function hn(t,e,n){return(e=function(t){var e=function(t){if("object"!=dn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=dn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==dn(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const vn={components:{MessageBanner:D,Avatar:j,Links:R,UserInfoForm:wt,LoginOptionsForm:te,SocialForm:pe,ActiveSessionsField:Fe,MarketingConsent:Qe,NotificationPreferences:sn,DeleteAccountField:ln,SudoModal:ke},mixins:[d.ch],props:{translations:{type:Object,required:!0},deleteUrl:{type:String,required:!0},logoutUrl:{type:String,required:!0},syncUrl:{type:String,required:!0},forumsUrl:{type:String,required:!0},addonsUrl:{type:String,required:!0},validCountries:{type:Array,required:!0},socialAccounts:{type:Object,required:!0},messages:{type:Array,default:function(){return[]}},avatars:{type:Object,required:!0},doubleOptInCountries:{type:Array,default:function(){return[]}},userHasWebauthnEnabled:{type:Boolean}},data:function(){return{sudoMode:{onGranted:null,onClosed:null},verifyEmailBannerClosed:!1,outOfBackupCodesBannerClosed:!1}},computed:fn(fn(fn(fn({},(0,u.L8)(["showingSudoModal"])),(0,u.aH)({usedBackupCodes:"usedBackupCodes",maxBackupCodes:"maxBackupCodes",currentlyVerified:function(t){return t.email.isVerified},currentPendingAddress:function(t){return t.email.pendingAddress},userData:function(t){return t._user}})),(0,u.aH)({currentUsername:"username",currentFullname:"fullname"})),{},{welcomeText:function(){var t,e,n="";return(null===(t=this.currentFullname)||void 0===t?void 0:t.length)>0?n=this.currentFullname:(null===(e=this.currentUsername)||void 0===e?void 0:e.length)>0&&(n=this.currentUsername),(0,h.FV)(this.translations.settings.header,{username:n}).replace(" !","!")},userGravatar:function(){return this.userData.profile_image_url},ofaAPIAvailable:function(){return un.A.isSupported()},isMobile:function(){return(0,h.Fr)()},showVerifyEmailBanner:function(){return!this.verifyEmailBannerClosed&&(!this.currentlyVerified||this.currentlyVerified&&this.currentPendingAddress)},showOutOfBackupCodesBanner:function(){return!this.outOfBackupCodesBannerClosed&&!!this.usedBackupCodes&&!!this.maxBackupCodes},outOfBackupCodesWarning:function(){return(0,h.FV)(this.translations.settings.banner.outOfBackupCodes,{used:this.usedBackupCodes,max:this.maxBackupCodes})}}),mounted:function(){this._showMessagesInToast(),this.checkBrowserSession()},created:function(){var t=this;this.$root.$on("register-sudo-callbacks",(function(e){var n=e.onGranted,r=e.onClosed;t.sudoMode.onGranted=n,t.sudoMode.onClosed=r}))},methods:fn(fn({},(0,u.i0)(["showSudoModal","hideSudoModal"])),{},{onGranted:function(){this.hideSudoModal(),this.sudoMode.onGranted&&(this.sudoMode.onGranted(),this._resetSudoModeCallbacks())},onClosed:function(){this.hideSudoModal(),this.sudoMode.onClosed&&(this.sudoMode.onClosed(),this._resetSudoModeCallbacks())},_resetSudoModeCallbacks:function(){this.sudoMode={onGranted:null,onClosed:null}},_showMessagesInToast:function(){var t=this;0!==this.messages.length&&this.messages.forEach((function(e){if(!["success","error"].includes(e.tags))throw new Error("Unsupported toast type ".concat(e.tags));t.showToast("msg-".concat(e.tags),e.message)}))},onVerifyEmailBannerClicked:function(){this.$scrollTo("#email-section",w.NU)},onOutOfBackupCodesBannerClicked:function(){this.$scrollTo("#two-factor-auth-section",w.NU)},onVerifyEmailBannerClosed:function(){this.verifyEmailBannerClosed=!0},onOutOfBackupCodesBannerClosed:function(){this.outOfBackupCodesBannerClosed=!0}})},mn=(0,m.A)(vn,l,[],!1,null,null,null).exports;var yn=function(){var t=this,e=t._self._c;return e("div",[t.ofaAPIAvailable?t._e():e("auth-authenticated-header",{attrs:{"login-url":t.headerLoginUrl,"logout-url":t.headerLogoutUrl,"settings-url":t.headerSettingsUrl,username:t.headerUsername,"avatar-url":t.headerAvatarUrl,translations:t.translations.settings.pageHeader}}),t._v(" "),e("router-view"),t._v(" "),e("auth-footer",{class:{"blue-background-mdmax":t.isMobile}})],1)};yn._withStripped=!0;var gn=function(){var t=this,e=t._self._c;return e("header",{staticClass:"ns--hf",attrs:{id:"header"}},[e("a",{staticClass:"hf--brand auth",attrs:{href:t.loginUrl}}),t._v(" "),e("div",{staticClass:"hf--account"},[e("a",{staticClass:"hf--profile",attrs:{href:t.settingsUrl,title:t.username}},[e("p",[t._v(t._s(t.username))]),t._v(" "),e("img",{attrs:{src:t.avatarUrl,alt:t.username}})]),t._v(" "),e("a",{staticClass:"secondaryButton",on:{click:t.logOut}},[t._v(t._s(t.translations.logout))])])])};function bn(t){return bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bn(t)}function _n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function wn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_n(Object(n),!0).forEach((function(e){Sn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_n(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Sn(t,e,n){return(e=function(t){var e=function(t){if("object"!=bn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=bn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==bn(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}gn._withStripped=!0;var Cn=function(t){return!t||0===Object.keys(t).length&&t.constructor===Object},kn=!window.opr||Cn(window.opr)?{}:window.opr.syncAuthFlowPrivate,On=!window.opr||Cn(window.opr)?{}:window.opr.authPrivate,Pn=!window.ofa||Cn(window.ofa)?{}:window.ofa.auth,Tn=function(){if(!Cn(On)&&!Cn(On.API_VERSION)){var t=Object.keys(On.API_VERSION)[0].slice(1).split("_").map((function(t){return parseInt(t)}));if(3==t.length&&t.every((function(t){return Number.isInteger(t)})))return{major:t[0],minor:t[1],patch:t[2]}}}(),En=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Tn?t==Tn.major&&e<Tn.minor||t==Tn.major&&e==Tn.minor&&n<=Tn.patch:2==t?!Cn(kn):3==t&&0==e?!Cn(On):3==t&&1==e&&!Cn(On.logoutBrowser)},An=function(){if(!Cn(null==On?void 0:On.supply2fa)||!Cn(null==Pn?void 0:Pn.supply2fa))return null!=On&&On.supply2fa?On.supply2fa:Pn.supply2fa},xn=wn(wn({},On),{},{login:function(t,e,n){return En(3,4,0)?On.login(t,e,n):On.login(t,n)}});const jn={isSupported:function(){return!Cn(On)},versionIsAtLeast:En,login:xn,syncAuthFlow:kn,supply2faExists:function(){return!!An()},supply2fa:An(),isOfa:Pn};var Bn=function(){return new Promise((function(t,e){return jn.versionIsAtLeast(3)?jn.versionIsAtLeast(3,2)?void jn.login.isEnvMatched((function(n){return n?t():e(new Error("Env is not matched"))})):t():e(new Error("Non-Opera or outdated browser, giving up on auto-login."))}))};const Fn={props:{loginUrl:{type:String,required:!0},logoutUrl:{type:String,required:!0},settingsUrl:{type:String,required:!0},username:{type:String,required:!0},avatarUrl:{type:String,required:!0},translations:{type:Object,required:!0}},methods:{logOut:function(){var t=this;Bn().then((function(){jn.login.logout((function(){location.href=t.logoutUrl}))})).catch((function(e){console.warn(e),location.href=t.logoutUrl})),setTimeout((function(){location.href=t.logoutUrl}),3e3)}}};function Dn(t){return Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dn(t)}function $n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Mn(t,e,n){return(e=function(t){var e=function(t){if("object"!=Dn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Dn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Dn(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Ln={components:{AuthAuthenticatedHeader:(0,m.A)(Fn,gn,[],!1,null,null,null).exports,AuthFooter:n(82525).A},mixins:[d.o8,d.jU],props:{translations:{type:Object,required:!0}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$n(Object(n),!0).forEach((function(e){Mn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$n(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({ofaAPIAvailable:function(){return un.A.isSupported()},isMobile:function(){return(0,h.Fr)()}},(0,u.aH)({userEmail:function(t){return t.email.address},freshLogin:function(t){return t.freshLogin},hasPassword:function(t){return t.hasPassword}})),mounted:function(){var t,e;this.freshLogin&&(t=this.userEmail,e=this._user.userID,Bn().then((function(){return function(t){return new Promise((function(e,n){jn.login.getSessionData((function(r){return r?r.state!==jn.login.AuthState.IN_PROGRESS?e():t===r.userId?n(new Error("Browser is in a signed-in state already, skipping auto-login.")):jn.versionIsAtLeast(3,1)?jn.login.logoutBrowser(e):n(new Error("Operation not supported. Browser too old.")):n(new Error("Browser returned empty session data. Probably in incognito mode."))}))}))}(e).then((function(){return function(t){return new Promise((function(e,n){(0,_.A)({method:"POST",headers:(0,h.oS)(),url:w.tw}).then((function(r){if(!r.data.auth_token)return n(new Error("Did not receive an auth token, auto-login cannot proceed."));jn.login.storeCredentials(t,"",(function(){var t=window.props.provider?window.props.provider:"unknown";jn.login.login(r.data.auth_token,t,(function(){var t;return null!==(t=window.chrome)&&void 0!==t&&null!==(t=t.runtime)&&void 0!==t&&t.lastError?n(new Error(window.chrome.runtime.lastError)):e("Auto-login successful!")}))}))})).catch((function(t){return n(new Error(t))}))}))}(t)}))}))).then((function(t){console.info(t)})).catch((function(t){console.warn(t)}))}},In=(0,m.A)(Ln,yn,[],!1,null,null,null).exports;var Rn=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"separator"}),t._v(" "),e("main",[e("h1",[e("img",{staticClass:"back-arrow",attrs:{alt:"Back",tabindex:"0",src:n(32881),width:"23"},on:{click:t.onBackClick}}),t._v("\n      "+t._s(t.subscriptionTranslations.manageSubscriptions)+"\n    ")]),t._v(" "),t.fetching?e("section",{staticClass:"mt1-5 bordered"},[e("div",{staticClass:"spinner"})]):e("div",[t.activeSubscriptions.length?e("section",{staticClass:"mt1-5 bordered"},[e("h2",{staticClass:"category"},[t._v("\n          "+t._s(t.subscriptionTranslations.active)+"\n        ")]),t._v(" "),t._l(t.activeSubscriptions,(function(n,r){return e("subscription",{key:r,attrs:{translations:t.subscriptionTranslations,name:n.name,description:n.description,icon:"icon-".concat(n.product),"next-payment":n.expiry_time,"auto-renewing":n.auto_renewing,"is-active":!0,source:n.source},on:{"subscription-button-clicked":function(e){return t.redirectToManageSubscriptions(n)}}})}))],2):t._e(),t._v(" "),e("section",{staticClass:"mt1-5 bordered"},[e("h2",{staticClass:"category"},[t._v("\n          "+t._s(t.subscriptionTranslations.inactive)+"\n        ")]),t._v(" "),e("redeem-code",{attrs:{translations:t.subscriptionTranslations.redeemCode},on:{success:t.redeemSuccess}}),t._v(" "),t._l(t.inactiveSubscriptions,(function(n,r){return e("subscription",{key:r,attrs:{translations:t.subscriptionTranslations,name:n.name,description:n.description,icon:"icon-".concat(n.product),"next-payment":n.expiry_time,"is-active":!1,"subscription-disabled":n.purchase_blocked},on:{"subscription-button-clicked":function(e){return t.redirectToBuySubscriptions(n)}}})})),t._v(" "),e("subscription",{attrs:{translations:t.subscriptionTranslations,name:t.subscriptionTranslations.comingSoon,description:t.subscriptionTranslations.stayTuned,icon:"icon-stars","is-active":!0,"button-text":t.subscriptionTranslations.availableSoon,"subscription-disabled":!0}})],2)])])])};Rn._withStripped=!0;var Un=function(){return(0,_.A)({method:"GET",headers:{Accept:"application/json"},url:w.e_})},Nn=function(){var t=this,e=t._self._c;return e("div",{staticClass:"subscription",class:{disabled:t.subscriptionDisabled}},[e("div",{staticClass:"icon",class:[t.icon]}),t._v(" "),e("div",{staticClass:"content"},[e("div",{},[e("h3",{staticClass:"name"},[t._v("\n        "+t._s(t.name)+"\n      ")]),t._v(" "),e("p",{staticClass:"description"},[t._v("\n        "+t._s(t.description)+"\n      ")])]),t._v(" "),e("div",{staticClass:"cta"},[t.nextPayment?e("p",{staticClass:"next-payment"},[t._v("\n        "+t._s((t.isActive?t.autoRenewing?t.translations.nextPayment:t.translations.expiresOn:t.translations.expired)+": "+t.nextPayment)+"\n      ")]):t._e(),t._v(" "),t.showButton?e("button",{class:[t.isActive?"secondaryButton":"primaryButton"],attrs:{disabled:t.subscriptionDisabled||t.buttonFetchingState},on:{click:function(e){return t.$emit("subscription-button-clicked")}}},[t.buttonFetchingState?e("div",[e("div",{staticClass:"spinner"})]):e("div",[t._v("\n          "+t._s(t.finalButtonText)+"\n        ")])]):t._e()])])])};Nn._withStripped=!0;const qn={props:{translations:{type:Object,required:!0},name:{type:String,required:!0},description:{type:String,required:!1,default:void 0},icon:{type:String,required:!1,default:"icon-vpn"},isActive:{type:Boolean,required:!1,default:!0},nextPayment:{type:String,required:!1,default:void 0},source:{type:String,required:!1,default:void 0},subscriptionDisabled:{type:Boolean,required:!1,default:!1},buttonBlocked:{type:Boolean,required:!1,default:!1},buttonText:{type:String,required:!1,default:void 0},buttonFetchingState:{type:Boolean,required:!1,default:!1},autoRenewing:{type:Boolean,required:!1,default:!1}},data:function(){return{fetchingPaymentURL:!1}},computed:{finalButtonText:function(){return this.buttonText?this.buttonText:this.isActive?this.translations.manage:this.translations.getIt},showButton:function(){return"dummy"!==this.source}}},Wn=(0,m.A)(qn,Nn,[],!1,null,null,null).exports;var Hn=function(){var t=this,e=t._self._c;return e("div",{staticClass:"redeem-code"},[e("div",{staticClass:"redeem-content"},[e("h3",[t._v(t._s(t.translations.header))]),t._v(" "),e("text-input",{attrs:{name:"fullname",translations:t.translations,validator:{error:t.$v.coupon_code.$error||Boolean(t.backendError)},"error-msg":t.backendError,"error-type":{missing:!t.$v.coupon_code.required,tooLong:!t.$v.coupon_code.maxLength,backendError:Boolean(t.backendError)},placeholder:t.translations.enterYourCode},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.redeem.apply(null,arguments)}},model:{value:t.$v.coupon_code.$model,callback:function(e){t.$set(t.$v.coupon_code,"$model",e)},expression:"$v.coupon_code.$model"}})],1),t._v(" "),e("button",{staticClass:"primaryButton",attrs:{disabled:t.fetching},on:{click:t.redeem}},[t.fetching?e("div",[e("div",{staticClass:"spinner"})]):e("div",[t._v("\n      "+t._s(t.translations.EnterCta)+"\n    ")])])])};Hn._withStripped=!0;const Vn={components:{TextInput:H.A},mixins:[q.Hy,d.ch],props:{translations:{type:Object,required:!0}},data:function(){return{coupon_code:"",backendError:"",fetching:!1}},watch:{fetching:function(t){this.$emit("fetching",t)}},validations:{coupon_code:{required:W.mw,maxLength:(0,W.Ru)(30)}},methods:{redeem:function(){var t,e=this;this.$v.$touch(),this.backendError="",this.$v.coupon_code.$error||(this.fetching=!0,(t=this.coupon_code,(0,_.A)({method:"POST",headers:(0,h.oS)(),data:{coupon_code:t},url:w.q2})).then((function(t){e.$emit("success",t.data.product)})).catch((function(t){if(400===t.response.status||502===t.response.status){var n=t.response.data;n.error_message?e.backendError=n.error_message:(console.error(t),e.showToast("msg-error",t))}else console.error(t),e.showToast("msg-error",t)})).then((function(){e.fetching=!1})))}}},Gn={components:{Subscription:Wn,RedeemCode:(0,m.A)(Vn,Hn,[],!1,null,null,null).exports},mixins:[d.ch],props:{translations:{type:Object,required:!0},vpnproProductUrl:{type:String,required:!0},vpnproFinalUrl:{type:String,required:!0}},data:function(){return{fetching:!1,fetchingManageURL:!1,activeSubscriptions:[],inactiveSubscriptions:[]}},computed:{subscriptionTranslations:function(){return this.translations.settings.subscriptions}},mounted:function(){var t=this;un.A.isSupported()&&this.$router.replace({path:"/edit-profile"}),this.fetching?this.fetching=!1:(this.fetching=!0,Un().then((function(e){t.activeSubscriptions=e.data.active,t.inactiveSubscriptions=e.data.expired.concat(e.data.available)})).catch((function(e){t.showToast("msg-error",e)})).then((function(){t.fetching=!1})))},methods:{onBackClick:function(){this.$router.push("/edit-profile")},redeemSuccess:function(){var t=1e3,e=this.vpnproFinalUrl,n=this.activeSubscriptions;setTimeout((function r(){var o=this;Un().then((function(t){n!=t.data.active.length&&(window.location=e)})).catch((function(t){o.showToast("msg-error",t)})).then((function(){t*=1.5,setTimeout(r,t)}))}),t),setTimeout((function(){window.location=e}),15e3)},redirectToBuySubscriptions:function(t){var e=null;"vpn"===t.product?e=this.vpnproProductUrl:console.error("Unknown subscription product"),e&&(window.location=e)},redirectToManageSubscriptions:function(t){var e=this;t.manage_url?window.open(t.manage_url):this.fetchingManageURL?this.fetchingManageURL=!1:(this.fetchingManageURL=!0,function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,_.A)({method:"GET",headers:{Accept:"application/json"},params:e,url:(0,w.cZ)(t)})}(t.source,t.source_specific_data).then((function(t){window.open(t.data.url)})).catch((function(t){e.showToast("msg-error",t)})).then((function(){e.fetchingManageURL=!1})))}}},zn=(0,m.A)(Gn,Rn,[],!1,null,null,null).exports;var Kn,Xn={setSudoModalVisibility:function(t,e){t.sudoMode.showingModal=e},setSudoModeExpiryTimestamp:function(t,e){t.sudoMode.expires=e},updateUsername:function(t,e){t.username=e},updateEmailInfo:function(t,e){t.email=e},updateCountry:function(t,e){t.country=e},updateFullname:function(t,e){t.fullname=e},setPasswordState:function(t,e){t.hasPassword=e},addTOTPDevice:function(t,e){t.TOTPDevices.push(e)},addWebAuthnDevice:function(t,e){t.WebAuthnDevices.push(e)},updateWebAuthnDevice:function(t,e){var n=t.WebAuthnDevices.findIndex((function(t){return t.id===e.id}));-1!==n&&(t.WebAuthnDevices[n]=e)},deleteTOTPDevice:function(t,e){t.TOTPDevices=t.TOTPDevices.filter((function(t){return t.id!==e}))},deleteWebAuthnDevice:function(t,e){t.WebAuthnDevices=t.WebAuthnDevices.filter((function(t){return t.id!==e}))},setMarketingConsent:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t.marketingConsent[n]=e[n])},setNotificationPreference:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t.notificationPreferences[n]=e[n])},expireSudoMode:function(t){t.sudoMode.expires=0},hideOutOfBackupCodesBanner:function(t){t.usedBackupCodes=null}};const Yn={name:"edit",state:{email:"",username:"",fullname:"",country:"",marketingConsent:{},notificationPreferences:{},sudoMode:{showingModal:!1,expires:(Kn=new Date,Kn.getTime()/1e3)},TOTPDevices:[],WebAuthnDevices:[],profileImageURL:"",usedBackupCodes:null,maxBackupCodes:null},getters:{showingSudoModal:function(t){return t.sudoMode.showingModal}},actions:{showSudoModal:function(t){(0,t.commit)("setSudoModalVisibility",!0)},hideSudoModal:function(t){(0,t.commit)("setSudoModalVisibility",!1)}},mutations:Xn};function Qn(t){return Qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qn(t)}function Jn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Zn(t,e,n){return(e=function(t){var e=function(t){if("object"!=Qn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Qn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Qn(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var tr=[{path:"/edit-profile",component:mn,props:window.props},{path:"/subscriptions",component:zn,props:window.props}],er=new o.Ay({mode:"history",base:"/account",routes:tr}),nr=Yn.state,rr=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(-1!==e.indexOf(r))continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(Yn,["state"]);nr.email=window.props.email,nr.username=window.props.username,nr.freshLogin=window.props.freshLogin,nr.fullname=window.props.fullname,nr.country=window.props.country,nr.socialAccounts=window.props.socialAccounts,nr.hasPassword=window.props.hasPassword,nr.marketingConsent=window.props.marketingConsent,nr.notificationPreferences=window.props.notificationPreferences,nr.profileImageURL=window.props.profileImageURL,window.props.sudoExpires&&(nr.sudoMode.expires=window.props.sudoExpires),window.props.totpDevices.length>0&&(nr.TOTPDevices=window.props.totpDevices),window.props.webAuthnDevices.length>0&&(nr.WebAuthnDevices=window.props.webAuthnDevices),window.webAuthnJSON={get:qt.Jt,create:qt.vt},(0,r.q)(In,er,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Jn(Object(n),!0).forEach((function(e){Zn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({state:nr},rr),[c(),s()])},46417:(t,e,n)=>{n.d(e,{$c:()=>v,B_:()=>w,FV:()=>g,FW:()=>k,Fr:()=>S,IB:()=>b,OE:()=>C,W9:()=>y,aj:()=>f,bf:()=>h,jg:()=>_,oS:()=>m});var r=n(71083),o=n(12215),i=n.n(o),s=n(33278),a=n(83057),c=n(35311),l=n(42838),u=n.n(l);function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function p(t,e,n){return(e=function(t){var e=function(t){if("object"!=d(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==d(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}u().setConfig({ADD_ATTR:["target"]});var f=function(){return u().sanitize.apply(u(),arguments)},h=function(t){return function(t){var e=400===t.status&&429===t.data.error_code,n=429===t.status&&Boolean(t.data.errors);return e||n}(t)?t.data.error_code?t.data.error_message:t.data.errors[0].detail:null},v=function(){return i().get(c.o7)},m=function(){return p(p({},c.rH,v()),"Accept","application/json")},y=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.sE,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(0,a.withParams)({fieldName:t,errorDest:e},(function(i,s){if(!i||!s.$v.$anyDirty)return!1;var a=m();n===c.tJ&&(a["X-Language-Locale"]=window.config.language);var l=o?{service:n,form_name:o}:{service:n};return r.A.create({headers:a,params:l}).post("/service/validation2/user",{field:t,value:i}).then((function(t){var n="error"===t.data.status,r=n?t.data.message:null;return s[e]=r,!n})).catch((function(t){if(!t.response)return!1;var n=h(t.response);if(n)return s[e]=n,!1;throw t}))}))},g=function(t,e){return Object.keys(e).forEach((function(n){t=t.replace("{".concat(n,"}"),e[n])})),f(t)},b=s._$.regex("validFormat",/^(?=.[a-zA-Z0-9])([-]?[a-zA-Z0-9]){3,30}$/),_=s._$.regex("validFormat",/^.{8,}$/),w=6,S=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},C=function(){return function(){var t;try{t=window.localStorage;var e="__storage_test__";return t.setItem(e,e),t.removeItem(e),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}}()},k=function(t){window.config.language=t;var e=["ar"].includes(t),n=document.querySelector("html");n.lang=t,n.dir=e?"rtl":"ltr",document.querySelectorAll("[data-dir=rtl]").forEach((function(t){return e?t.removeAttribute("disabled"):t.setAttribute("disabled","")})),document.querySelectorAll("[data-dir=ltr]").forEach((function(t){return e?t.setAttribute("disabled",""):t.removeAttribute("disabled")}))}},35311:(t,e,n)=>{n.d(e,{$s:()=>j,$t:()=>z,Eu:()=>C,Gv:()=>x,Iy:()=>_,JM:()=>S,Kp:()=>y,LM:()=>V,NU:()=>W,Tc:()=>A,Tg:()=>k,Xr:()=>K,YC:()=>b,ZO:()=>O,_P:()=>$,cO:()=>E,cZ:()=>U,co:()=>G,dg:()=>g,e_:()=>R,ep:()=>D,j1:()=>T,k$:()=>m,k_:()=>I,o7:()=>B,q2:()=>N,rH:()=>F,rs:()=>P,sE:()=>h,sv:()=>w,t1:()=>L,tJ:()=>v,tw:()=>q,xx:()=>M,yK:()=>H});var r=n(51261),o=n(43572),i=n(37053),s=n(47820),a=n(69818),c=n(61051),l=n(64640),u=n(96713),d=n(66041),p=n(24532),f=n(39427),h="auth",v="opera_desktop",m="/api/v1/profile",y="".concat(m,"/email"),g="".concat(m,"/password"),b="".concat(m,"/sessions"),_="".concat(m,"/sudo"),w=("".concat(m,"/delete"),"/account/cancel-email-verification"),S="".concat(m,"/preferences"),C="".concat(m,"/marketing-consent"),k="/account/marketing-consent-confirmation/request",O="/account/request-email-verification",P=function(t,e){return"".concat(b,"/").concat(t,"/").concat(e)},T="/api/v1/social/connect",E=function(t){return"/otp/init-flow?type=".concat(t)},A=function(t){return"/otp/finish-flow?type=".concat(t)},x=function(t){return"/otp/devices/".concat(t)},j=function(t){return"".concat(x(t),"/verify")},B=window.config&&window.config.csrfCookieName?window.config.csrfCookieName:"__Host-csrftoken",F="X-CSRFToken",D="/avatars/upload/jobs/",$=function(t){return"/avatars/upload/jobs/".concat(t,"/")},M={IN_PROGRESS:"IN_PROGRESS",DONE:"DONE",ERROR:"ERROR"},L="/avatars/me",I="avatar-new.svg",R="/api/v1/subscriptions",U=function(t){return"/api/v1/subscriptions/".concat(t,"/manage-url")},N="/api/v1/subscriptions/xsolla/redeem",q="/account/api/create-token/",W=500,H="_initial_email",V="_login_info",G={"gmail.com":"https://gmail.com","opera.com":"https://gmail.com","yahoo.com":"https://mail.yahoo.com","hotmail.com":"https://hotmail.com","outlook.com":"https://outlook.com"},z={auth:{logo:r,logoSessionList:r,url:"https://auth.opera.com",name:"Opera Account"},addons:{logo:o,logoSessionList:o,url:"https://addons.opera.com",name:"Opera Addons"},forums:{logo:i,logoSessionList:i,url:"https://forums.opera.com",name:"Opera Forums"},mini:{logo:s,logoSessionList:s,name:"Opera"},mini_ios:{logo:s,logoSessionList:s,name:"Opera"},ofa:{logo:c,logoSessionList:c,name:"Opera"},opera_desktop:{logo:a,logoSessionList:a,name:"Opera"},opera_gx:{logo:p,logoSessionList:p,name:"Opera"},opera_air:{logo:f,logoSessionList:f,name:"Opera Air"},"sync-ui":{logo:l,logoSessionList:l,url:"https://sync.opera.com",name:"Opera Sync"},"cashback-dify":{logo:u,logoSessionList:u,url:"https://cashback.opera.com/",name:"Opera Cashback"},gmx:{url:"https://gx.games/",customLoginPage:!1,name:"GX.games",logo:d,logoSessionList:d},extensions:{name:"Opera Extensions",logo:a,url:"https://api.ext.opr.gg/login/oauth2/code/opera-ext"},"extensions-sandbox":{name:"Opera Extensions",logo:a,url:"https://sandbox.api.ext.opr.gg/login/oauth2/code/opera-ext"},"extensions-stage":{name:"Opera Extensions",logo:a,url:"https://stage.api.ext.gmx.dev/login/oauth2/code/opera-ext"},"extensions-test":{name:"Opera Extensions",logo:a,url:"https://test.api.ext.gmx.dev/login/oauth2/code/opera-ext"},gx_client_id:{logo:p,logoSessionList:p,name:"Opera"},mobile_client_id_fixme:{logo:c,logoSessionList:c,name:"Opera"},ofa_fixme:{logo:c,logoSessionList:c,name:"Opera"},desktop_client_id:{logo:a,logoSessionList:a,name:"Opera"},mini_fixme:{logo:s,logoSessionList:s,name:"Opera"},mini_ios_fixme:{logo:s,logoSessionList:s,name:"Opera"},"gaming-test":{url:"https://gx.games/",customLoginPage:!1,logo:d,logoSessionList:d,name:"GX.games"}},K={TOTP:"totp",WEBAUTHN:"webauthn",STATIC:"static"}},30766:(t,e,n)=>{n.d(e,{DF:()=>d,KW:()=>l,ch:()=>i,i_:()=>u,jU:()=>a,o8:()=>s,vU:()=>c});var r=n(46417),o=n(35311),i={methods:{showToast:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r={duration:5e3,position:"top-center",containerClass:"toast-custom-container-style",className:["toast-custom-style",t],iconPack:"custom-class",action:{icon:"toast-custom-close-icon",onClick:function(t,e){e.goAway(0)}}};n&&(r.icon=n),this.$toasted.show(e,r)}}},s={props:{_user:Object},created:function(){var t=this;if((0,r.OE)()&&this._user&&this._user.email){var e=localStorage.getItem(o.LM);if(e){var n=(e=JSON.parse(e)).filter((function(e){return e.email!==t._user.email}));n.unshift(this._user),n=n.slice(0,4),localStorage.setItem(o.LM,JSON.stringify(n))}else{var i=[this._user];localStorage.setItem(o.LM,JSON.stringify(i))}}}},a={props:{service:{type:String,required:!0},headerLoginUrl:{type:String,required:!0},headerLogoutUrl:{type:String,default:null},headerSettingsUrl:{type:String,default:null},headerUsername:{type:String,default:null},headerAvatarUrl:{type:String,default:null}}},c={data:function(){return{isHighlighted:!1}},mounted:function(){if(window.location.hash){var t=window.location.hash.slice(1);this.isHighlighted=this.$el.getAttribute("id")===t}}},l={data:function(){return{_savingForm:!1,_saveClicked:!1}},computed:{staticValidationSuccessful:function(){return this.$v.$dirty&&!this.$v.$pending&&!this.$v.$invalid}},mounted:function(){var t=this;this.$watch("$v.$pending",(function(e,n){!e&&n&&t._saveClicked&&t._maybeSubmitForm()})),this.$watch("$v.$error",(function(e){e&&(t._saveClicked=!1)}))},methods:{submit:function(){},_maybeSubmitForm:function(){var t=this;!this._savingForm&&this.staticValidationSuccessful&&(this._saveClicked=!1,this._savingForm=!0,Promise.resolve(this.submit()).then((function(){t._savingForm=!1})))},onClick:function(){this._savingForm||this.$v.$error||(this._saveClicked=!0,this.$v.$touch(),this._maybeSubmitForm())}}},u={methods:{getCSRFToken:function(){return(0,r.$c)()}}},d={computed:{typeToCustomProps:function(){var t={};if("password"==this.type)t={id:"password",placeholder:this.translations.label,label:this.translations.label};else if("new"===this.type)t={id:"new-password",placeholder:this.translations.newPasswordLabel,label:this.translations.newPasswordLabel};else{if("repeat"!==this.type)throw new Error("Invalid field type");t={id:"repeat-password",placeholder:this.translations.repeatedPasswordLabel,label:this.translations.repeatedPasswordLabel}}return t},compId:function(){return this.id||this.typeToCustomProps.id},compPlaceholder:function(){return this.placeholder||this.typeToCustomProps.placeholder},compLabel:function(){return this.label||this.typeToCustomProps.label}}}},32881:(t,e,n)=>{t.exports=n.p+"img/7875e77aba3a038225bd.svg"},75524:(t,e,n)=>{t.exports=n.p+"img/108064e9f5402e4e2a6c.svg"},27330:(t,e,n)=>{t.exports=n.p+"img/42e24160739807be0831.svg"},1436:(t,e,n)=>{t.exports=n.p+"img/8cba4362d2168881d072.png"},38359:(t,e,n)=>{t.exports=n.p+"img/391bc3f8b7934c64bff3.png"}},n={};function r(t){var o=n[t];if(void 0!==o)return o.exports;var i=n[t]={id:t,loaded:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.m=e,t=[],r.O=(e,n,o,i)=>{if(!n){var s=1/0;for(u=0;u<t.length;u++){for(var[n,o,i]=t[u],a=!0,c=0;c<n.length;c++)(!1&i||s>=i)&&Object.keys(r.O).every((t=>r.O[t](n[c])))?n.splice(c--,1):(a=!1,i<s&&(s=i));if(a){t.splice(u--,1);var l=o();void 0!==l&&(e=l)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[n,o,i]},r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),r.p="https://auth-statics.operacdn.com/",(()=>{var t={edit:0,"src_auth_static_scss_auth_scss-src_auth_static_css_BeVietnamPro_css":0};r.O.j=e=>0===t[e];var e=(e,n)=>{var o,i,[s,a,c]=n,l=0;if(s.some((e=>0!==t[e]))){for(o in a)r.o(a,o)&&(r.m[o]=a[o]);if(c)var u=c(r)}for(e&&e(n);l<s.length;l++)i=s[l],r.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return r.O(u)},n=self.webpackChunkauth=self.webpackChunkauth||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var o=r.O(void 0,["vendors-node_modules_dompurify_dist_purify_js-node_modules_vuelidate_lib_validators_alpha_js--53a3d0","vendors-node_modules_sentry_browser_esm_sdk_js-node_modules_sentry_integrations_esm_vue_js-no-6e7610","vendors-node_modules_vuelidate_lib_index_js","vendors-node_modules_vue-toasted_dist_vue-toasted_min_js","vendors-node_modules_sentry_core_esm_exports_js-node_modules_js-cookie_src_js_cookie_js-node_-32bddc","vendors-node_modules_clipboard_dist_clipboard_js-node_modules_cropperjs_dist_cropper_js-node_-0ad723","src_auth_static_js_entrypoints_preconfigured_instance_js-src_auth_static_img_cashback-logo_pn-9a8bcf","src_auth_static_scss_auth_scss-src_auth_static_css_BeVietnamPro_css","src_auth_static_js_utils_webauthn_js-src_auth_static_js_components_common_inputs_OtpCode_vue--1189fe","src_auth_static_js_components_authenticate_api_api_js-src_auth_static_js_components_common_Au-83900d","src_auth_static_js_utils_ofa_js-src_auth_static_js_components_common_Spinner_vue-src_auth_sta-1264b0"],(()=>r(5818)));o=r.O(o)})();
//# sourceMappingURL=edit-2511dc0671d7325c7cbd.js.map
//# debugId=c7a8d14b-2d01-51b1-8171-03a9010b8ee8
